
> level-up@0.1.0 lint
> eslint --format json

[{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\seed_auth.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":51},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":16,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":35}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client');\r\nconst bcrypt = require('bcryptjs');\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nasync function main() {\r\n    const password = await bcrypt.hash('password123', 10);\r\n\r\n    const admin = await prisma.user.upsert({\r\n        where: { email: 'admin@example.com' },\r\n        update: { password, role: 'ADMIN', name: 'Dummy Admin' },\r\n        create: {\r\n            email: 'admin@example.com',\r\n            password,\r\n            role: 'ADMIN',\r\n            name: 'Dummy Admin'\r\n        }\r\n    });\r\n\r\n    const student = await prisma.user.upsert({\r\n        where: { email: 'student@example.com' },\r\n        update: { password, role: 'STUDENT', name: 'Dummy Student' },\r\n        create: {\r\n            email: 'student@example.com',\r\n            password,\r\n            role: 'STUDENT',\r\n            name: 'Dummy Student'\r\n        }\r\n    });\r\n\r\n    console.log('Seeded Admin:', admin.email);\r\n    console.log('Seeded Student:', student.email);\r\n}\r\n\r\nmain()\r\n    .catch(e => {\r\n        console.error(e);\r\n        process.exit(1);\r\n    })\r\n    .finally(async () => {\r\n        await prisma.$disconnect();\r\n    });\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\[deckId]\\study\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[925,928],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[925,928],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1453,1456],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1453,1456],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_isDue' is defined but never used.","line":104,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sm2_stats' is defined but never used.","line":104,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":47}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import prisma from \"@/lib/prisma\";\r\nimport { notFound } from \"next/navigation\";\r\nimport { getServerSession } from \"next-auth/next\";\r\nimport { authOptions } from \"@/app/api/auth/[...nextauth]/route\";\r\nimport StudyInterface from \"../../components/study/StudyInterface\";\r\nimport EndlessInterface from \"../../components/study/EndlessInterface\";\r\nimport Link from \"next/link\";\r\nimport { shuffleArray } from \"@/utils/study/studyUtils\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nexport default async function StudyDeckPage({\r\n    params,\r\n    searchParams,\r\n}: {\r\n    params: Promise<{ deckId: string }>;\r\n    searchParams: Promise<{ mode?: string }>;\r\n}) {\r\n    const { deckId } = await params;\r\n    const { mode } = await searchParams;\r\n    const isReviewMode = mode === \"review\";\r\n    const isEndlessMode = mode === \"endless\";\r\n\r\n    const session = await getServerSession(authOptions);\r\n    const userId = (session?.user as any)?.id;\r\n\r\n    const deck = await prisma.decks.findUnique({\r\n        where: { id: deckId },\r\n        include: {\r\n            cards: {\r\n                include: {\r\n                    sm2_stats: userId\r\n                        ? { where: { user_id: userId } }\r\n                        : false,\r\n                },\r\n            },\r\n        },\r\n    });\r\n\r\n    if (!deck) {\r\n        notFound();\r\n    }\r\n\r\n    const now = new Date();\r\n\r\n    const cardsWithPriority = [...deck.cards].map((card) => {\r\n        const stats = (card as any).sm2_stats?.[0];\r\n        const easeFactor = stats?.ease_factor ?? 2.5;\r\n        const nextReview = stats?.next_review ? new Date(stats.next_review) : null;\r\n        const isDue = !nextReview || nextReview <= now; // no stats = due, past due = due\r\n\r\n        return {\r\n            ...card,\r\n            _easeFactor: easeFactor,\r\n            _isDue: isDue,\r\n        };\r\n    });\r\n\r\n    // In review mode, only show cards that are due for review\r\n    const filteredCards = isReviewMode\r\n        ? cardsWithPriority.filter((c) => c._isDue)\r\n        : cardsWithPriority;\r\n\r\n    // If review mode and no cards are due, show a message\r\n    if (isReviewMode && filteredCards.length === 0) {\r\n        return (\r\n            <div className=\"min-h-screen bg-black text-white flex flex-col justify-center items-center p-4\">\r\n                <div className=\"max-w-md text-center animate-in fade-in zoom-in duration-500\">\r\n                    <h2 className=\"text-4xl font-black text-[#f9c111] mb-4\">All Caught Up! ðŸŽ‰</h2>\r\n                    <p className=\"text-neutral-400 text-lg mb-8\">\r\n                        No cards are due for review right now. Check back later, or switch to Study Mode to practice the full deck.\r\n                    </p>\r\n                    <div className=\"flex flex-col sm:flex-row justify-center items-center gap-4\">\r\n                        <Link\r\n                            href={`/${deckId}/study?mode=study`}\r\n                            className=\"bg-[#f9c111] hover:bg-yellow-400 text-black font-bold py-4 px-12 rounded-xl transition-all shadow-[0_0_20px_rgba(249,193,17,0.3)] hover:shadow-[0_0_30px_rgba(249,193,17,0.5)] hover:-translate-y-1 text-lg\"\r\n                        >\r\n                            Study Mode\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/study\"\r\n                            className=\"bg-neutral-800 hover:bg-neutral-700 text-white font-bold py-4 px-12 rounded-xl transition-all hover:-translate-y-1 border border-neutral-700 text-lg\"\r\n                        >\r\n                            Back to Decks\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Group by ease_factor bands (rounded to 1 decimal)\r\n    const byEaseBand = new Map<number, typeof filteredCards>();\r\n    for (const card of filteredCards) {\r\n        const key = Math.round(card._easeFactor * 10);\r\n        if (!byEaseBand.has(key)) byEaseBand.set(key, []);\r\n        byEaseBand.get(key)!.push(card);\r\n    }\r\n\r\n    // Sort bands ascending (lowest ease = hardest first), shuffle within each band\r\n    const finalCards = [...byEaseBand.entries()]\r\n        .sort(([a], [b]) => a - b)\r\n        .flatMap(([, bandCards]) => shuffleArray(bandCards))\r\n        .map(({ _easeFactor, _isDue, sm2_stats, ...card }) => ({\r\n            ...card,\r\n            ease_factor: _easeFactor,\r\n        }));\r\n\r\n    // Endless mode: render the EndlessInterface with shuffled cards\r\n    if (isEndlessMode) {\r\n        return (\r\n            <div className=\"min-h-screen bg-black text-white flex flex-col justify-center items-center p-4\">\r\n                <EndlessInterface cards={finalCards} deckId={deck.id} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-black text-white flex flex-col justify-center items-center p-4\">\r\n            <StudyInterface cards={finalCards} deckId={deck.id} />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'profile' is defined but never used.","line":47,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1861,1864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1861,1864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2088,2091],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2088,2091],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2152,2155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2152,2155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import NextAuth from \"next-auth\";\r\nimport { PrismaAdapter } from \"@auth/prisma-adapter\";\r\nimport GoogleProvider from \"next-auth/providers/google\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport type { NextAuthOptions } from \"next-auth\";\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n    adapter: PrismaAdapter(prisma),\r\n    providers: [\r\n        GoogleProvider({\r\n            clientId: process.env.GOOGLE_CLIENT_ID || \"dummy_client_id\",\r\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"dummy_client_secret\",\r\n        }),\r\n        CredentialsProvider({\r\n            name: \"Email and Password\",\r\n            credentials: {\r\n                email: { label: \"Email\", type: \"email\", placeholder: \"student@example.com\" },\r\n                password: { label: \"Password\", type: \"password\" },\r\n            },\r\n            async authorize(credentials) {\r\n                if (!credentials?.email || !credentials?.password) return null;\r\n\r\n                const user = await prisma.user.findUnique({\r\n                    where: { email: credentials.email }\r\n                });\r\n\r\n                if (!user || !user.password) {\r\n                    return null;\r\n                }\r\n\r\n                const isValidPassword = await bcrypt.compare(credentials.password, user.password);\r\n\r\n                if (!isValidPassword) {\r\n                    return null;\r\n                }\r\n\r\n                return { id: user.id, name: user.name, email: user.email, role: user.role };\r\n            },\r\n        }),\r\n    ],\r\n    session: {\r\n        strategy: \"jwt\",\r\n    },\r\n    callbacks: {\r\n        async jwt({ token, user, profile }) {\r\n            if (user) {\r\n                // We capture the initial assigned role on login\r\n                token.role = (user as any).role || \"STUDENT\";\r\n                token.id = user.id;\r\n            }\r\n            return token;\r\n        },\r\n        async session({ session, token }) {\r\n            if (session.user) {\r\n                (session.user as any).id = token.id as string;\r\n                (session.user as any).role = token.role as string;\r\n            }\r\n            return session;\r\n        },\r\n    },\r\n    pages: {\r\n        signIn: \"/login\",\r\n    },\r\n    secret: process.env.NEXTAUTH_SECRET || \"changemeinzdevelopment\",\r\n};\r\n\r\nconst handler = NextAuth(authOptions);\r\n\r\nexport { handler as GET, handler as POST };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\auth\\register\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2215,2218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2215,2218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from \"next/server\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { email, password, role, firstName, lastName, username, university } = await req.json();\r\n\r\n        if (!email || !password) {\r\n            return NextResponse.json(\r\n                { message: \"Missing email or password.\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        // Check if user already exists\r\n        const existingUser = await prisma.user.findFirst({\r\n            where: {\r\n                OR: [\r\n                    { email },\r\n                    { username: username || undefined }\r\n                ]\r\n            },\r\n        });\r\n\r\n        if (existingUser) {\r\n            if (existingUser.email === email) {\r\n                return NextResponse.json({ message: \"User with this email already exists.\" }, { status: 409 });\r\n            }\r\n            if (existingUser.username && existingUser.username === username) {\r\n                return NextResponse.json({ message: \"Username is already taken.\" }, { status: 409 });\r\n            }\r\n        }\r\n\r\n        // Hash the password securely\r\n        const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n        // Assign requested role if provided, default to STUDENT\r\n        // (In production, an ADMIN role shouldn't be assignable by anyone visiting /register)\r\n        const assignedRole = role === \"ADMIN\" ? \"ADMIN\" : \"STUDENT\";\r\n\r\n        // Create the user in the database\r\n        const newUser = await prisma.user.create({\r\n            data: {\r\n                email,\r\n                password: hashedPassword,\r\n                name: `${firstName} ${lastName}`.trim() || email.split(\"@\")[0], // Keep basic nextAuth structure\r\n                firstName,\r\n                lastName,\r\n                username,\r\n                university,\r\n                role: assignedRole,\r\n            },\r\n        });\r\n\r\n        return NextResponse.json(\r\n            { message: \"User registered successfully.\", user: { id: newUser.id, email: newUser.email, role: newUser.role } },\r\n            { status: 201 }\r\n        );\r\n    } catch (error: any) {\r\n        console.error(\"Registration error:\", error);\r\n        return NextResponse.json(\r\n            { message: \"An error occurred during registration.\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\decks\\[deckId]\\cards\\[cardId]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\decks\\[deckId]\\cards\\bulk\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\decks\\[deckId]\\cards\\review\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'calculateQualityGrade' is defined but never used.","line":5,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"calculateQualityGrade"},"fix":{"range":[234,257],"text":""},"desc":"Remove unused variable \"calculateQualityGrade\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'params' is defined but never used.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[651,654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[651,654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from \"next/server\";\r\nimport { getServerSession } from \"next-auth/next\";\r\nimport { authOptions } from \"@/app/api/auth/[...nextauth]/route\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport { calculateSM2, calculateQualityGrade } from \"@/utils/cognitive/sm2\";\r\n\r\nexport async function POST(\r\n    request: NextRequest,\r\n    { params }: { params: Promise<{ deckId: string }> }\r\n) {\r\n    try {\r\n        const session = await getServerSession(authOptions);\r\n        if (!session?.user) {\r\n            return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\r\n        }\r\n\r\n        const userId = (session.user as any).id;\r\n        const { cardId, qualityGrade } = await request.json();\r\n\r\n        if (typeof cardId !== \"string\" || typeof qualityGrade !== \"number\") {\r\n            return NextResponse.json({ error: \"Invalid payload\" }, { status: 400 });\r\n        }\r\n\r\n        // Get existing SM2 stats or use defaults\r\n        const existing = await prisma.sM2Stats.findUnique({\r\n            where: { card_id_user_id: { card_id: cardId, user_id: userId } },\r\n        });\r\n\r\n        const prevEase = existing?.ease_factor ?? 2.5;\r\n        const prevInterval = existing?.interval ?? 0;\r\n        const prevReps = existing?.repetitions ?? 0;\r\n\r\n        // Run the SM2 algorithm\r\n        const result = calculateSM2(qualityGrade, prevReps, prevEase, prevInterval);\r\n\r\n        // Upsert the SM2 stats record\r\n        const updated = await prisma.sM2Stats.upsert({\r\n            where: { card_id_user_id: { card_id: cardId, user_id: userId } },\r\n            update: {\r\n                ease_factor: result.ease_factor,\r\n                interval: result.interval,\r\n                repetitions: result.repetitions,\r\n                next_review: result.next_review,\r\n            },\r\n            create: {\r\n                card_id: cardId,\r\n                user_id: userId,\r\n                ease_factor: result.ease_factor,\r\n                interval: result.interval,\r\n                repetitions: result.repetitions,\r\n                next_review: result.next_review,\r\n            },\r\n        });\r\n\r\n        return NextResponse.json({ success: true, stats: updated });\r\n    } catch (error) {\r\n        console.error(\"Review API error:\", error);\r\n        return NextResponse.json({ error: \"Internal server error\" }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\decks\\[deckId]\\cards\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\decks\\[deckId]\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":23,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":40,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":63,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from \"next/server\";\r\nimport prisma from \"@/lib/prisma\";\r\n\r\nexport async function GET(\r\n    request: Request,\r\n    { params }: { params: Promise<{ deckId: string }> }\r\n) {\r\n    try {\r\n        const resolvedParams = await params;\r\n\r\n        const deck = await prisma.decks.findUnique({\r\n            where: { id: resolvedParams.deckId },\r\n            include: {\r\n                cards: true,\r\n            },\r\n        });\r\n\r\n        if (!deck) {\r\n            return NextResponse.json({ error: \"Deck not found\" }, { status: 404 });\r\n        }\r\n\r\n        return NextResponse.json(deck);\r\n    } catch (error) {\r\n        return NextResponse.json({ error: \"Failed to fetch deck\" }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function DELETE(\r\n    request: Request,\r\n    { params }: { params: Promise<{ deckId: string }> }\r\n) {\r\n    try {\r\n        const resolvedParams = await params;\r\n\r\n        await prisma.decks.delete({\r\n            where: { id: resolvedParams.deckId },\r\n        });\r\n\r\n        return NextResponse.json({ success: true });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: \"Failed to delete deck\" }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function PUT(\r\n    request: Request,\r\n    { params }: { params: Promise<{ deckId: string }> }\r\n) {\r\n    try {\r\n        const resolvedParams = await params;\r\n        const { title } = await request.json();\r\n\r\n        if (!title || title.trim() === \"\") {\r\n            return NextResponse.json({ error: \"Title is required\" }, { status: 400 });\r\n        }\r\n\r\n        const updatedDeck = await prisma.decks.update({\r\n            where: { id: resolvedParams.deckId },\r\n            data: { title: title.trim() },\r\n        });\r\n\r\n        return NextResponse.json(updatedDeck);\r\n    } catch (error) {\r\n        return NextResponse.json({ error: \"Failed to update deck\" }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\decks\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":6,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user_id' is assigned a value but never used.","line":27,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[981,984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[981,984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1137,1140],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1137,1140],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from \"next/server\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport { getServerSession } from \"next-auth/next\";\r\nimport { authOptions } from \"../auth/[...nextauth]/route\";\r\n\r\nexport async function GET(request: Request) {\r\n    try {\r\n        const decks = await prisma.decks.findMany({\r\n            include: {\r\n                _count: {\r\n                    select: { cards: true }\r\n                }\r\n            },\r\n            orderBy: { title: 'asc' }\r\n        });\r\n\r\n        return NextResponse.json(decks);\r\n    } catch (error) {\r\n        console.error(\"GET decks error:\", error);\r\n        return NextResponse.json({ error: \"Failed to fetch decks\" }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const session = await getServerSession(authOptions);\r\n        const { title, user_id } = await request.json();\r\n\r\n        // Ensure session exists\r\n        if (!session || !session.user || !(session.user as any).id) {\r\n            return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\r\n        }\r\n\r\n        const resolvedUserId = (session.user as any).id;\r\n\r\n        // Find max sequence\r\n        const lastDeck = await prisma.decks.findFirst({\r\n            where: { user_id: resolvedUserId },\r\n            orderBy: { deck_seq: 'desc' },\r\n        });\r\n\r\n        const nextSeq = (lastDeck?.deck_seq || 0) + 1;\r\n\r\n        const deck = await prisma.decks.create({\r\n            data: {\r\n                title,\r\n                user_id: resolvedUserId,\r\n                deck_seq: nextSeq,\r\n            },\r\n        });\r\n\r\n        return NextResponse.json(deck, { status: 201 });\r\n    } catch (error) {\r\n        console.error(\"POST deck error:\", error);\r\n        return NextResponse.json({ error: \"Failed to create deck\" }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\api\\upload\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\BulkImportCards.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2091,2094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2091,2094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3264,3267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3264,3267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport * as XLSX from \"xlsx\";\r\nimport { Download, Upload, Loader2 } from \"lucide-react\";\r\n\r\nexport default function BulkImportCards({ deckId }: { deckId: string }) {\r\n    const router = useRouter();\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleDownloadTemplate = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await fetch('/Flashcards_Template.xlsx');\r\n            if (!response.ok) throw new Error(\"Failed to fetch template\");\r\n            const blob = await response.blob();\r\n            const url = window.URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.download = 'Flashcards_Template.xlsx';\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n            window.URL.revokeObjectURL(url);\r\n        } catch (error) {\r\n            console.error(\"Error downloading template:\", error);\r\n            setError(\"Failed to download template. Please try again.\");\r\n        }\r\n    };\r\n\r\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        setIsUploading(true);\r\n        setError(null);\r\n        setSuccessMessage(null);\r\n\r\n        try {\r\n            const data = await file.arrayBuffer();\r\n            const workbook = XLSX.read(data);\r\n            const worksheet = workbook.Sheets[workbook.SheetNames[0]];\r\n\r\n            // Raw JSON data from sheet\r\n            const rawJson = XLSX.utils.sheet_to_json(worksheet);\r\n\r\n            // Map rows back to expectations ({ front, back })\r\n            const cardsToImport = rawJson.map((row: any) => ({\r\n                front: row[\"Front (Prompt)\"] || \"\",\r\n                back: row[\"Back (Target Answer)\"] || \"\"\r\n            })).filter((card) => card.front.trim() !== \"\" && card.back.trim() !== \"\");\r\n\r\n            if (cardsToImport.length === 0) {\r\n                throw new Error(\"No valid cards found. Ensure the template has 'Front (Prompt)' and 'Back (Target Answer)' columns.\");\r\n            }\r\n\r\n            // Post to backend\r\n            const response = await fetch(`/api/decks/${deckId}/cards/bulk`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(cardsToImport),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const resData = await response.json();\r\n                throw new Error(resData.error || \"Failed to import cards.\");\r\n            }\r\n\r\n            const result = await response.json();\r\n            setSuccessMessage(`Successfully imported ${result.count} cards!`);\r\n\r\n            if (fileInputRef.current) {\r\n                fileInputRef.current.value = \"\";\r\n            }\r\n\r\n            router.refresh();\r\n        } catch (err: any) {\r\n            setError(err.message || \"An error occurred during import.\");\r\n            if (fileInputRef.current) {\r\n                fileInputRef.current.value = \"\";\r\n            }\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-xl w-full mt-6\">\r\n            <h3 className=\"text-lg font-bold text-white mb-4\">Bulk Import</h3>\r\n\r\n            <div className=\"space-y-4\">\r\n                <p className=\"text-sm text-neutral-400\">\r\n                    Add multiple cards quickly using an Excel file.\r\n                </p>\r\n\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={handleDownloadTemplate}\r\n                    disabled={isUploading}\r\n                    className={`w-full flex items-center justify-center gap-2 bg-neutral-800 hover:bg-neutral-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors border border-neutral-700 ${isUploading ? 'opacity-50 pointer-events-none' : ''}`}\r\n                >\r\n                    <Download className=\"w-4 h-4\" />\r\n                    Download Template\r\n                </button>\r\n\r\n                <div className=\"relative\">\r\n                    <input\r\n                        type=\"file\"\r\n                        accept=\".xlsx, .xls\"\r\n                        onChange={handleFileChange}\r\n                        disabled={isUploading}\r\n                        ref={fileInputRef}\r\n                        className=\"hidden\"\r\n                        id=\"excel-upload\"\r\n                    />\r\n                    <label\r\n                        htmlFor=\"excel-upload\"\r\n                        className={`w-full flex items-center justify-center gap-2 bg-[#f9c111] hover:bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg transition-colors cursor-pointer ${isUploading ? 'opacity-50 pointer-events-none' : ''}`}\r\n                    >\r\n                        {isUploading ? (\r\n                            <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                        ) : (\r\n                            <Upload className=\"w-4 h-4\" />\r\n                        )}\r\n                        {isUploading ? \"Importing...\" : \"Upload Excel File\"}\r\n                    </label>\r\n                </div>\r\n\r\n                {error && <p className=\"text-red-500 text-sm mt-2 font-medium\">{error}</p>}\r\n                {successMessage && <p className=\"text-green-500 text-sm mt-2 font-medium\">{successMessage}</p>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\CreateDeckForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[526,529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[526,529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1632,1635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1632,1635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n// Form Validation Schema\r\nconst deckSchema = z.object({\r\n    title: z.string().min(3, \"Title must be at least 3 characters\").max(50, \"Title is too long\"),\r\n});\r\n\r\ntype DeckFormValues = z.infer<typeof deckSchema>;\r\n\r\nexport default function CreateDeckForm({ onDeckCreated }: { onDeckCreated?: (deck: any) => void }) {\r\n    const router = useRouter();\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors },\r\n        reset,\r\n    } = useForm<DeckFormValues>({\r\n        resolver: zodResolver(deckSchema),\r\n    });\r\n\r\n    const onSubmit = async (data: DeckFormValues) => {\r\n        setIsSubmitting(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await fetch(\"/api/decks\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ title: data.title }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(\"Failed to create deck\");\r\n            }\r\n\r\n            const newDeck = await response.json();\r\n\r\n            reset();\r\n            if (onDeckCreated) {\r\n                onDeckCreated(newDeck);\r\n            }\r\n            router.refresh();\r\n        } catch (err: any) {\r\n            setError(err.message || \"An unexpected error occurred.\");\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-xl w-full max-w-md\">\r\n            <h2 className=\"text-xl font-bold text-white mb-4\">Create New Deck</h2>\r\n\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                <div>\r\n                    <label htmlFor=\"title\" className=\"block text-sm font-medium text-neutral-400 mb-1\">\r\n                        Deck Title\r\n                    </label>\r\n                    <input\r\n                        {...register(\"title\")}\r\n                        id=\"title\"\r\n                        type=\"text\"\r\n                        placeholder=\"e.g. Neuroscience 101\"\r\n                        className={`w-full bg-neutral-950 border ${errors.title ? \"border-red-500\" : \"border-neutral-800\"\r\n                            } rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all`}\r\n                    />\r\n                    {errors.title && (\r\n                        <p className=\"text-red-500 text-xs mt-1\">{errors.title.message}</p>\r\n                    )}\r\n                </div>\r\n\r\n                {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={isSubmitting}\r\n                    className=\"w-full bg-[#f9c111] hover:bg-yellow-400 text-black font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                    {isSubmitting ? \"Creating...\" : \"Create Deck\"}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\DeckItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":50,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface Deck {\r\n    id: string;\r\n    title: string;\r\n    deck_seq: number | null;\r\n    _count: { cards: number };\r\n}\r\n\r\ninterface DeckItemProps {\r\n    deck: Deck;\r\n    onDelete: (id: string) => void;\r\n    onUpdate: (id: string, newTitle: string) => void;\r\n}\r\n\r\nexport default function DeckItem({ deck, onDelete, onUpdate }: DeckItemProps) {\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [editTitle, setEditTitle] = useState(deck.title);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n    const [showConfirmDelete, setShowConfirmDelete] = useState(false);\r\n    const router = useRouter();\r\n\r\n    const displayId = deck.deck_seq ? String(deck.deck_seq).padStart(3, '0') : deck.id;\r\n\r\n    const handleSave = async () => {\r\n        if (!editTitle.trim() || editTitle === deck.title) {\r\n            setIsEditing(false);\r\n            setEditTitle(deck.title);\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            const res = await fetch(`/api/decks/${deck.id}`, {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ title: editTitle.trim() }),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to update deck\");\r\n\r\n            onUpdate(deck.id, editTitle.trim());\r\n            setIsEditing(false);\r\n            router.refresh();\r\n        } catch (error) {\r\n            alert(\"Failed to update deck.\");\r\n            setEditTitle(deck.title);\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteClick = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (!showConfirmDelete) {\r\n            setShowConfirmDelete(true);\r\n            return;\r\n        }\r\n\r\n        executeDelete();\r\n    };\r\n\r\n    const cancelDelete = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setShowConfirmDelete(false);\r\n    };\r\n\r\n    const executeDelete = async () => {\r\n        setIsDeleting(true);\r\n        try {\r\n            const res = await fetch(`/api/decks/${deck.id}`, {\r\n                method: \"DELETE\",\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to delete deck\");\r\n\r\n            // Optimistically remove from UI\r\n            onDelete(deck.id);\r\n            // Refresh Next.js router cache in the background\r\n            router.refresh();\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert(\"Failed to delete deck.\");\r\n            setIsDeleting(false);\r\n            setShowConfirmDelete(false);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === \"Enter\") handleSave();\r\n        if (e.key === \"Escape\") {\r\n            setIsEditing(false);\r\n            setEditTitle(deck.title);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-neutral-900 border border-neutral-800 hover:border-neutral-700 transition-all duration-300 rounded-xl p-5 group flex flex-col h-full shadow-lg hover:shadow-[#f9c111]/10 relative\">\r\n\r\n            <div className={`absolute top-4 right-4 flex gap-2 z-10 transition-opacity duration-200 ${showConfirmDelete ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`}>\r\n                {!isEditing && (\r\n                    <>\r\n                        {!showConfirmDelete && (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={(e) => { e.preventDefault(); setIsEditing(true); }}\r\n                                className=\"p-1.5 text-neutral-400 hover:text-white hover:bg-neutral-800 rounded-md transition-colors\"\r\n                                title=\"Edit Deck Title\"\r\n                            >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"></path></svg>\r\n                            </button>\r\n                        )}\r\n\r\n                        {showConfirmDelete ? (\r\n                            <div className=\"flex bg-neutral-800 rounded-md border border-red-900/50 overflow-hidden shadow-lg animate-in slide-in-from-right-2 fade-in duration-200\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={cancelDelete}\r\n                                    className=\"px-3 py-1.5 text-xs text-neutral-300 hover:text-white hover:bg-neutral-700 transition font-medium\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleDeleteClick}\r\n                                    disabled={isDeleting}\r\n                                    className=\"px-3 py-1.5 text-xs text-white bg-red-600 hover:bg-red-500 font-bold transition disabled:opacity-50 flex items-center gap-1\"\r\n                                >\r\n                                    {isDeleting ? \"...\" : \"Confirm\"}\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={handleDeleteClick}\r\n                                disabled={isDeleting}\r\n                                className=\"p-1.5 text-neutral-400 hover:text-red-500 hover:bg-neutral-800 rounded-md transition-colors disabled:opacity-50\"\r\n                                title=\"Delete Deck\"\r\n                            >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path></svg>\r\n                            </button>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"mb-2 border-b border-neutral-800/50 pb-2 flex justify-between items-center mt-1\">\r\n                <span className=\"text-[10px] text-[#f9c111] font-mono tracking-widest font-bold\">DECK #{displayId}</span>\r\n            </div>\r\n\r\n            <div className=\"flex-1 mt-2\">\r\n                {isEditing ? (\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={editTitle}\r\n                            onChange={(e) => setEditTitle(e.target.value)}\r\n                            onKeyDown={handleKeyDown}\r\n                            autoFocus\r\n                            disabled={isSaving}\r\n                            className=\"w-full bg-black border border-[#f9c111] rounded-md px-3 py-1.5 text-white font-semibold text-lg focus:outline-none mb-1 disabled:opacity-50\"\r\n                        />\r\n                        <div className=\"flex gap-2 text-xs\">\r\n                            <button\r\n                                onClick={handleSave}\r\n                                disabled={isSaving}\r\n                                className=\"text-green-500 hover:text-green-400 font-medium\"\r\n                            >\r\n                                {isSaving ? \"Saving...\" : \"Save (Enter)\"}\r\n                            </button>\r\n                            <button\r\n                                onClick={() => { setIsEditing(false); setEditTitle(deck.title); }}\r\n                                disabled={isSaving}\r\n                                className=\"text-neutral-500 hover:text-white\"\r\n                            >\r\n                                Cancel (Esc)\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <Link href={`/creator/${deck.id}`} className=\"block\">\r\n                        <h3 className=\"font-semibold text-lg text-white group-hover:text-[#f9c111] transition-colors leading-tight pr-12 line-clamp-2\">\r\n                            {deck.title}\r\n                        </h3>\r\n                    </Link>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"mt-6 flex justify-between items-center text-sm text-neutral-400\">\r\n                <span className=\"bg-black px-3 py-1 rounded-full text-xs font-semibold tracking-wider\">\r\n                    {deck._count.cards} Cards\r\n                </span>\r\n                <Link href={`/creator/${deck.id}`}>\r\n                    <span className=\"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1 font-medium text-[#f9c111] hover:text-white\">\r\n                        Manage Deck <span>&rarr;</span>\r\n                    </span>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\DeckList.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":75,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2612,2668],"text":"You don&apos;t have any decks yet. Create one to get started."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2612,2668],"text":"You don&lsquo;t have any decks yet. Create one to get started."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2612,2668],"text":"You don&#39;t have any decks yet. Create one to get started."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2612,2668],"text":"You don&rsquo;t have any decks yet. Create one to get started."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport DeckItem from \"./DeckItem\";\r\n\r\ninterface Deck {\r\n    id: string;\r\n    title: string;\r\n    deck_seq: number | null;\r\n    _count: { cards: number };\r\n}\r\n\r\ninterface DeckListProps {\r\n    decks: Deck[];\r\n    onDelete: (id: string) => void;\r\n    onUpdate: (id: string, newTitle: string) => void;\r\n}\r\n\r\nexport default function DeckList({ decks, onDelete, onUpdate }: DeckListProps) {\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [searchType, setSearchType] = useState<'all' | 'title' | 'id'>('all');\r\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const decksPerPage = 12;\r\n\r\n    const searchTypeLabels: Record<'all' | 'title' | 'id', string> = {\r\n        all: \"Search All Fields\",\r\n        title: \"Title Only\",\r\n        id: \"ID Only\"\r\n    };\r\n\r\n    // Handle click outside to close dropdown\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsDropdownOpen(false);\r\n            }\r\n        }\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    // Filter Logic\r\n    const filteredDecks = decks.filter((deck) => {\r\n        const query = searchQuery.toLowerCase();\r\n\r\n        if (!query) return true;\r\n\r\n        const displayId = deck.deck_seq ? String(deck.deck_seq).padStart(3, '0') : deck.id.toLowerCase();\r\n\r\n        if (searchType === 'title') return deck.title.toLowerCase().includes(query);\r\n        if (searchType === 'id') return displayId.includes(query);\r\n\r\n        // Default 'all'\r\n        return (\r\n            deck.title.toLowerCase().includes(query) ||\r\n            displayId.includes(query)\r\n        );\r\n    });\r\n\r\n    // Pagination Logic\r\n    const totalPages = Math.ceil(filteredDecks.length / decksPerPage) || 1;\r\n    const startIndex = (currentPage - 1) * decksPerPage;\r\n    const paginatedDecks = filteredDecks.slice(startIndex, startIndex + decksPerPage);\r\n\r\n    if (currentPage > totalPages) {\r\n        setCurrentPage(totalPages);\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {decks.length === 0 ? (\r\n                <div className=\"bg-neutral-900 border border-neutral-800 rounded-xl p-12 text-center shadow-lg\">\r\n                    <p className=\"text-neutral-400\">You don't have any decks yet. Create one to get started.</p>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    <div className=\"flex flex-col sm:flex-row gap-4 mb-6 relative z-10\">\r\n                        {/* Custom Dropdown */}\r\n                        <div className=\"relative sm:w-48 z-20\" ref={dropdownRef}>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setIsDropdownOpen(!isDropdownOpen)}\r\n                                className={`w-full bg-neutral-900 border ${isDropdownOpen ? 'border-[#f9c111]' : 'border-neutral-800'} hover:border-neutral-700 rounded-lg px-4 py-3 text-white text-left focus:outline-none focus:ring-2 focus:ring-[#f9c111]/50 transition-all cursor-pointer text-sm flex justify-between items-center h-full min-h-[46px]`}\r\n                            >\r\n                                <span className=\"truncate pr-2\">{searchTypeLabels[searchType]}</span>\r\n                                <svg className={`flex-shrink-0 w-4 h-4 text-neutral-500 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path></svg>\r\n                            </button>\r\n\r\n                            {isDropdownOpen && (\r\n                                <div className=\"absolute top-full left-0 mt-2 w-full bg-neutral-900 border border-neutral-800 rounded-lg shadow-xl overflow-hidden py-1 z-30 transform origin-top animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                                    {(Object.keys(searchTypeLabels) as Array<keyof typeof searchTypeLabels>).map((key) => (\r\n                                        <button\r\n                                            key={key}\r\n                                            type=\"button\"\r\n                                            onClick={() => {\r\n                                                setSearchType(key);\r\n                                                setCurrentPage(1);\r\n                                                setIsDropdownOpen(false);\r\n                                            }}\r\n                                            className={`w-full text-left px-4 py-3 text-sm transition-colors hover:bg-neutral-800/80 flex items-center gap-2 ${searchType === key ? 'text-[#f9c111] bg-neutral-800/40 font-medium' : 'text-neutral-300'}`}\r\n                                        >\r\n                                            <div className={`w-1.5 h-1.5 rounded-full ${searchType === key ? 'bg-[#f9c111]' : 'bg-transparent'}`} />\r\n                                            {searchTypeLabels[key]}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"relative flex-1\">\r\n                            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                <svg className=\"h-5 w-5 text-neutral-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder={`Search by ${searchType === 'all' ? 'title or ID' : searchType}...`}\r\n                                value={searchQuery}\r\n                                onChange={(e) => {\r\n                                    setSearchQuery(e.target.value);\r\n                                    setCurrentPage(1);\r\n                                }}\r\n                                className=\"w-full bg-neutral-900 border border-neutral-800 rounded-lg pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all text-sm\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6\">\r\n                        {paginatedDecks.length === 0 ? (\r\n                            <div className=\"col-span-full\">\r\n                                <p className=\"text-neutral-400 text-center py-8\">No decks found matching your search.</p>\r\n                            </div>\r\n                        ) : (\r\n                            paginatedDecks.map((deck) => (\r\n                                <DeckItem\r\n                                    key={deck.id}\r\n                                    deck={deck}\r\n                                    onDelete={onDelete}\r\n                                    onUpdate={onUpdate}\r\n                                />\r\n                            ))\r\n                        )}\r\n                    </div>\r\n\r\n                    {totalPages > 1 && (\r\n                        <div className=\"flex justify-center items-center gap-4 pt-4 border-t border-neutral-800 mt-8\">\r\n                            <button\r\n                                onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\r\n                                disabled={currentPage === 1}\r\n                                className=\"px-4 py-2 bg-neutral-900 border border-neutral-800 rounded-lg text-white hover:bg-neutral-800 disabled:opacity-50 disabled:hover:bg-neutral-900 transition-colors\"\r\n                            >\r\n                                Previous\r\n                            </button>\r\n                            <span className=\"text-neutral-400 text-sm\">\r\n                                Page {currentPage} of {totalPages}\r\n                            </span>\r\n                            <button\r\n                                onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}\r\n                                disabled={currentPage === totalPages}\r\n                                className=\"px-4 py-2 bg-neutral-900 border border-neutral-800 rounded-lg text-white hover:bg-neutral-800 disabled:opacity-50 disabled:hover:bg-neutral-900 transition-colors\"\r\n                            >\r\n                                Next\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\DeckManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\DeleteDeckButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\SessionProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LogIn' is defined but never used.","line":7,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"LogIn"},"fix":{"range":[202,209],"text":""},"desc":"Remove unused variable \"LogIn\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronLeft' is defined but never used.","line":7,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":52,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronLeft"},"fix":{"range":[225,238],"text":""},"desc":"Remove unused variable \"ChevronLeft\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Menu' is defined but never used.","line":7,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":58,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Menu"},"fix":{"range":[238,244],"text":""},"desc":"Remove unused variable \"Menu\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[676,679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[676,679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3768,3771],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3768,3771],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useSession, signOut } from 'next-auth/react';\r\nimport { LogOut, LogIn, Home, Settings, ChevronLeft, Menu, PenTool } from 'lucide-react';\r\n\r\nexport default function Sidebar() {\r\n    const [isCollapsed, setIsCollapsed] = useState(true);\r\n    const pathname = usePathname();\r\n    const { data: session } = useSession();\r\n\r\n    if (pathname === '/login' || pathname === '/') return null;\r\n\r\n    const baseNavItems = [\r\n        { name: 'Study', href: '/study', icon: Home },\r\n    ];\r\n\r\n    const navItems = session?.user && (session.user as any).role === 'ADMIN'\r\n        ? [...baseNavItems, { name: 'Creator', href: '/creator', icon: PenTool }]\r\n        : baseNavItems;\r\n\r\n    return (\r\n        <aside\r\n            onMouseEnter={() => setIsCollapsed(false)}\r\n            onMouseLeave={() => setIsCollapsed(true)}\r\n            className={`bg-[#111111] border-r border-[#333] transition-all duration-300 ease-in-out flex flex-col min-h-screen ${isCollapsed ? 'w-20' : 'w-64'\r\n                }`}\r\n        >\r\n            <div className={`flex items-center p-4 border-b border-[#333] h-16 ${isCollapsed ? 'justify-center' : 'justify-start'}`}>\r\n                <Link href=\"/\">\r\n                    {isCollapsed ? (\r\n                        <span className=\"font-extrabold text-xl text-[#f9c111] tracking-tight\">LU</span>\r\n                    ) : (\r\n                        <span className=\"font-extrabold text-xl text-[#f9c111] tracking-tight\">LEVEL UP</span>\r\n                    )}\r\n                </Link>\r\n            </div>\r\n\r\n            <nav className=\"flex-1 py-6 flex flex-col gap-2 px-3\">\r\n                {navItems.map((item) => {\r\n                    const Icon = item.icon;\r\n                    // Simplistic active check for now\r\n                    const isActive = pathname === item.href;\r\n\r\n                    return (\r\n                        <Link\r\n                            key={item.name}\r\n                            href={item.href}\r\n                            className={`flex items-center gap-3 p-3 rounded-xl transition-all ${isActive\r\n                                ? 'bg-[#222] text-[#f9c111] font-semibold shadow-sm'\r\n                                : 'text-gray-400 hover:bg-[#222] hover:text-white'\r\n                                } ${isCollapsed ? 'justify-center' : 'justify-start'}`}\r\n                            title={isCollapsed ? item.name : undefined}\r\n                        >\r\n                            <Icon size={22} className=\"shrink-0\" />\r\n                            {!isCollapsed && <span>{item.name}</span>}\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n\r\n            <div className={`p-4 border-t border-[#333] flex flex-col gap-2 ${isCollapsed ? 'justify-center' : 'justify-start'}`}>\r\n                {session ? (\r\n                    <div className={`flex items-center gap-3 p-2 rounded-xl bg-neutral-900 border border-neutral-800 ${isCollapsed ? 'justify-center' : ''}`}>\r\n                        <div className=\"w-8 h-8 rounded-full bg-[#f9c111] text-black flex items-center justify-center font-bold font-mono text-sm shrink-0\">\r\n                            {(session.user?.name || session.user?.email || '?').charAt(0).toUpperCase()}\r\n                        </div>\r\n                        {!isCollapsed && (\r\n                            <div className=\"flex flex-col overflow-hidden\">\r\n                                <span className=\"text-sm font-medium text-white truncate\">{session.user?.name || 'User'}</span>\r\n                                <span className=\"text-xs text-neutral-500 truncate\">{(session.user as any)?.role}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ) : null}\r\n\r\n                <button\r\n                    onClick={() => session ? signOut({ callbackUrl: '/login' }) : null}\r\n                    className={`flex items-center gap-3 p-2 rounded-xl transition-all text-gray-400 hover:bg-[#222] hover:text-white ${isCollapsed ? 'justify-center w-full' : 'w-full'}`}\r\n                    title={isCollapsed ? (session ? 'Sign Out' : 'Settings') : undefined}\r\n                >\r\n                    {session ? <LogOut size={22} className=\"shrink-0 text-red-400\" /> : <Settings size={22} className=\"shrink-0\" />}\r\n                    {!isCollapsed && <span>{session ? 'Sign Out' : 'Settings'}</span>}\r\n                </button>\r\n            </div>\r\n        </aside>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\cards\\CreateCardForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5169,5172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5169,5172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useRef } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst cardSchema = z.object({\r\n    front: z.string().min(1, \"Front text is required\"),\r\n    back: z.string().min(1, \"Back text is required\"),\r\n    front_image_url: z.string().optional().or(z.literal('')),\r\n    back_image_url: z.string().optional().or(z.literal('')),\r\n});\r\n\r\ntype CardFormValues = z.infer<typeof cardSchema>;\r\n\r\nexport default function CreateCardForm({ deckId }: { deckId: string }) {\r\n    const router = useRouter();\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [frontImageFile, setFrontImageFile] = useState<File | null>(null);\r\n    const [backImageFile, setBackImageFile] = useState<File | null>(null);\r\n\r\n    const frontInputRef = useRef<HTMLInputElement>(null);\r\n    const backInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const [isFrontDragging, setIsFrontDragging] = useState(false);\r\n    const [isBackDragging, setIsBackDragging] = useState(false);\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors },\r\n        reset,\r\n    } = useForm<CardFormValues>({\r\n        resolver: zodResolver(cardSchema),\r\n    });\r\n\r\n    // File Handlers\r\n    const handlePaste = (e: React.ClipboardEvent, side: 'front' | 'back') => {\r\n        const items = e.clipboardData?.items;\r\n        if (!items) return;\r\n\r\n        for (const item of items) {\r\n            if (item.type.startsWith(\"image/\")) {\r\n                const file = item.getAsFile();\r\n                if (file) {\r\n                    if (side === 'front') setFrontImageFile(file);\r\n                    else setBackImageFile(file);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent, side: 'front' | 'back') => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (side === 'front') setIsFrontDragging(true);\r\n        else setIsBackDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = (e: React.DragEvent, side: 'front' | 'back') => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (side === 'front') setIsFrontDragging(false);\r\n        else setIsBackDragging(false);\r\n    };\r\n\r\n    const handleDrop = (e: React.DragEvent, side: 'front' | 'back') => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (side === 'front') setIsFrontDragging(false);\r\n        else setIsBackDragging(false);\r\n\r\n        const files = e.dataTransfer.files;\r\n        if (files && files.length > 0) {\r\n            const file = files[0];\r\n            if (file.type.startsWith(\"image/\")) {\r\n                if (side === 'front') setFrontImageFile(file);\r\n                else setBackImageFile(file);\r\n            }\r\n        }\r\n    };\r\n\r\n    const onSubmit = async (data: CardFormValues) => {\r\n        setIsSubmitting(true);\r\n        setError(null);\r\n\r\n        try {\r\n            let uploadedFrontUrl = data.front_image_url;\r\n            let uploadedBackUrl = data.back_image_url;\r\n\r\n            if (frontImageFile) {\r\n                const formData = new FormData();\r\n                formData.append(\"file\", frontImageFile);\r\n\r\n                const uploadRes = await fetch(\"/api/upload\", {\r\n                    method: \"POST\",\r\n                    body: formData,\r\n                });\r\n\r\n                if (!uploadRes.ok) {\r\n                    throw new Error(\"Front image upload failed. Please try again.\");\r\n                }\r\n\r\n                const uploadData = await uploadRes.json();\r\n                uploadedFrontUrl = uploadData.url;\r\n            }\r\n\r\n            if (backImageFile) {\r\n                const formData = new FormData();\r\n                formData.append(\"file\", backImageFile);\r\n\r\n                const uploadRes = await fetch(\"/api/upload\", {\r\n                    method: \"POST\",\r\n                    body: formData,\r\n                });\r\n\r\n                if (!uploadRes.ok) {\r\n                    throw new Error(\"Back image upload failed. Please try again.\");\r\n                }\r\n\r\n                const uploadData = await uploadRes.json();\r\n                uploadedBackUrl = uploadData.url;\r\n            }\r\n\r\n            const payload = { ...data, front_image_url: uploadedFrontUrl, back_image_url: uploadedBackUrl };\r\n\r\n            const response = await fetch(`/api/decks/${deckId}/cards`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(payload),\r\n            });\r\n\r\n            if (!response.ok) throw new Error(\"Failed to add card\");\r\n\r\n            reset();\r\n            setFrontImageFile(null);\r\n            setBackImageFile(null);\r\n\r\n            // Reset the uncontrolled file inputs visually\r\n            if (frontInputRef.current) frontInputRef.current.value = \"\";\r\n            if (backInputRef.current) backInputRef.current.value = \"\";\r\n\r\n            router.refresh();\r\n        } catch (err: any) {\r\n            setError(err.message || \"An unexpected error occurred.\");\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-xl w-full\">\r\n            <h3 className=\"text-lg font-bold text-white mb-4\">Add New Card</h3>\r\n\r\n            <form\r\n                onSubmit={handleSubmit(onSubmit)}\r\n                onKeyDown={(e) => {\r\n                    if (e.ctrlKey && e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        handleSubmit(onSubmit)();\r\n                    }\r\n                }}\r\n                className=\"space-y-4\"\r\n            >\r\n                {/* Front Side Section */}\r\n                <div\r\n                    className={`pb-4 border-b border-neutral-800 transition-colors ${isFrontDragging ? 'bg-neutral-800/50 rounded-lg p-2' : ''}`}\r\n                    onDragOver={(e) => handleDragOver(e, 'front')}\r\n                    onDragLeave={(e) => handleDragLeave(e, 'front')}\r\n                    onDrop={(e) => handleDrop(e, 'front')}\r\n                >\r\n                    <label className=\"block text-sm font-medium text-neutral-400 mb-1\">Front (Prompt)</label>\r\n                    <div className=\"relative\">\r\n                        <textarea\r\n                            {...register(\"front\")}\r\n                            rows={3}\r\n                            onPaste={(e) => handlePaste(e, 'front')}\r\n                            className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all resize-none\"\r\n                            placeholder=\"e.g. What is the powerhouse of the cell? (You can paste or drop images here)\"\r\n                        />\r\n                    </div>\r\n                    {errors.front && <p className=\"text-red-500 text-xs mt-1\">{errors.front.message}</p>}\r\n\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"block text-sm font-medium text-neutral-400 mb-1\">Image (Prompt) - Optional</label>\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <input\r\n                                id=\"front_image_upload\"\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                ref={frontInputRef}\r\n                                onChange={(e) => setFrontImageFile(e.target.files?.[0] || null)}\r\n                                disabled={isSubmitting}\r\n                                className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-bold file:bg-[#f9c111] file:text-black hover:file:bg-[#e0ad0e] disabled:opacity-50\"\r\n                            />\r\n                            {frontImageFile && (\r\n                                <span className=\"text-xs text-[#f9c111] font-semibold truncate max-w-[150px]\">\r\n                                    {frontImageFile.name}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Back Side Section */}\r\n                <div\r\n                    className={`pt-2 transition-colors ${isBackDragging ? 'bg-neutral-800/50 rounded-lg p-2' : ''}`}\r\n                    onDragOver={(e) => handleDragOver(e, 'back')}\r\n                    onDragLeave={(e) => handleDragLeave(e, 'back')}\r\n                    onDrop={(e) => handleDrop(e, 'back')}\r\n                >\r\n                    <label className=\"block text-sm font-medium text-neutral-400 mb-1\">Back (Target Answer)</label>\r\n                    <div className=\"relative\">\r\n                        <textarea\r\n                            {...register(\"back\")}\r\n                            rows={3}\r\n                            onPaste={(e) => handlePaste(e, 'back')}\r\n                            className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all resize-none\"\r\n                            placeholder=\"e.g. Mitochondria (You can paste or drop images here)\"\r\n                        />\r\n                    </div>\r\n                    {errors.back && <p className=\"text-red-500 text-xs mt-1\">{errors.back.message}</p>}\r\n\r\n                    <div className=\"mt-3\">\r\n                        <label className=\"block text-sm font-medium text-neutral-400 mb-1\">Image (Target Answer) - Optional</label>\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <input\r\n                                id=\"back_image_upload\"\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                ref={backInputRef}\r\n                                onChange={(e) => setBackImageFile(e.target.files?.[0] || null)}\r\n                                disabled={isSubmitting}\r\n                                className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-bold file:bg-[#f9c111] file:text-black hover:file:bg-[#e0ad0e] disabled:opacity-50\"\r\n                            />\r\n                            {backImageFile && (\r\n                                <span className=\"text-xs text-[#f9c111] font-semibold truncate max-w-[150px]\">\r\n                                    {backImageFile.name}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={isSubmitting}\r\n                    className=\"w-full bg-neutral-800 hover:bg-neutral-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors border border-neutral-700 disabled:opacity-50\"\r\n                >\r\n                    {isSubmitting ? \"Adding...\" : \"+ Add Card\"}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\cards\\EditCardForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5560,5563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5560,5563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":195,"column":33,"nodeType":"JSXOpeningElement","endLine":195,"endColumn":162},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":247,"column":33,"nodeType":"JSXOpeningElement","endLine":247,"endColumn":160}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst cardSchema = z.object({\r\n    front: z.string().min(1, \"Front text is required\"),\r\n    back: z.string().min(1, \"Back text is required\"),\r\n    front_image_url: z.string().optional().or(z.literal('')),\r\n    back_image_url: z.string().optional().or(z.literal('')),\r\n});\r\n\r\ntype CardFormValues = z.infer<typeof cardSchema>;\r\n\r\ninterface EditCardFormProps {\r\n    deckId: string;\r\n    card: {\r\n        id: string;\r\n        front: string;\r\n        back: string;\r\n        front_image_url: string | null;\r\n        back_image_url: string | null;\r\n    };\r\n}\r\n\r\nexport default function EditCardForm({ deckId, card }: EditCardFormProps) {\r\n    const router = useRouter();\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Track new files if user decides to override the existing image\r\n    const [frontImageFile, setFrontImageFile] = useState<File | null>(null);\r\n    const [backImageFile, setBackImageFile] = useState<File | null>(null);\r\n\r\n    // Drag states\r\n    const [isFrontDragging, setIsFrontDragging] = useState(false);\r\n    const [isBackDragging, setIsBackDragging] = useState(false);\r\n\r\n    // Track if user explicitly cleared an existing image\r\n    const [clearFrontImage, setClearFrontImage] = useState(false);\r\n    const [clearBackImage, setClearBackImage] = useState(false);\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors },\r\n    } = useForm<CardFormValues>({\r\n        resolver: zodResolver(cardSchema),\r\n        defaultValues: {\r\n            front: card.front,\r\n            back: card.back,\r\n            front_image_url: card.front_image_url || '',\r\n            back_image_url: card.back_image_url || '',\r\n        },\r\n    });\r\n\r\n    // File Handlers\r\n    const handlePaste = (e: React.ClipboardEvent, side: 'front' | 'back') => {\r\n        const items = e.clipboardData?.items;\r\n        if (!items) return;\r\n\r\n        for (const item of items) {\r\n            if (item.type.startsWith(\"image/\")) {\r\n                const file = item.getAsFile();\r\n                if (file) {\r\n                    if (side === 'front') { setFrontImageFile(file); setClearFrontImage(false); }\r\n                    else { setBackImageFile(file); setClearBackImage(false); }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent, side: 'front' | 'back') => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (side === 'front') setIsFrontDragging(true);\r\n        else setIsBackDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = (e: React.DragEvent, side: 'front' | 'back') => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (side === 'front') setIsFrontDragging(false);\r\n        else setIsBackDragging(false);\r\n    };\r\n\r\n    const handleDrop = (e: React.DragEvent, side: 'front' | 'back') => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (side === 'front') setIsFrontDragging(false);\r\n        else setIsBackDragging(false);\r\n\r\n        const files = e.dataTransfer.files;\r\n        if (files && files.length > 0) {\r\n            const file = files[0];\r\n            if (file.type.startsWith(\"image/\")) {\r\n                if (side === 'front') { setFrontImageFile(file); setClearFrontImage(false); }\r\n                else { setBackImageFile(file); setClearBackImage(false); }\r\n            }\r\n        }\r\n    };\r\n\r\n    const onSubmit = async (data: CardFormValues) => {\r\n        setIsSubmitting(true);\r\n        setError(null);\r\n\r\n        try {\r\n            let uploadedFrontUrl = clearFrontImage ? null : data.front_image_url;\r\n            let uploadedBackUrl = clearBackImage ? null : data.back_image_url;\r\n\r\n            if (frontImageFile) {\r\n                const formData = new FormData();\r\n                formData.append(\"file\", frontImageFile);\r\n\r\n                const uploadRes = await fetch(\"/api/upload\", {\r\n                    method: \"POST\",\r\n                    body: formData,\r\n                });\r\n\r\n                if (!uploadRes.ok) throw new Error(\"Front image upload failed.\");\r\n                const uploadData = await uploadRes.json();\r\n                uploadedFrontUrl = uploadData.url;\r\n            }\r\n\r\n            if (backImageFile) {\r\n                const formData = new FormData();\r\n                formData.append(\"file\", backImageFile);\r\n\r\n                const uploadRes = await fetch(\"/api/upload\", {\r\n                    method: \"POST\",\r\n                    body: formData,\r\n                });\r\n\r\n                if (!uploadRes.ok) throw new Error(\"Back image upload failed.\");\r\n                const uploadData = await uploadRes.json();\r\n                uploadedBackUrl = uploadData.url;\r\n            }\r\n\r\n            const payload = { ...data, front_image_url: uploadedFrontUrl, back_image_url: uploadedBackUrl };\r\n\r\n            const response = await fetch(`/api/decks/${deckId}/cards/${card.id}`, {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(payload),\r\n            });\r\n\r\n            if (!response.ok) throw new Error(\"Failed to update card\");\r\n\r\n            router.push(`/creator/${deckId}`);\r\n            router.refresh();\r\n        } catch (err: any) {\r\n            setError(err.message || \"An unexpected error occurred.\");\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    // Derived states to determine if we show current image\r\n    const showFrontExisting = !clearFrontImage && !frontImageFile && card.front_image_url;\r\n    const showBackExisting = !clearBackImage && !backImageFile && card.back_image_url;\r\n\r\n    return (\r\n        <div className=\"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 sm:p-8 shadow-xl relative overflow-hidden\">\r\n            <h3 className=\"text-xl font-bold text-white mb-6 border-b border-neutral-800 pb-2\">Edit Flashcard</h3>\r\n\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                {/* Front Side Section */}\r\n                <div\r\n                    className={`pb-4 border-b border-neutral-800 transition-colors ${isFrontDragging ? 'bg-neutral-800/50 rounded-lg p-3' : ''}`}\r\n                    onDragOver={(e) => handleDragOver(e, 'front')}\r\n                    onDragLeave={(e) => handleDragLeave(e, 'front')}\r\n                    onDrop={(e) => handleDrop(e, 'front')}\r\n                >\r\n                    <label className=\"block text-sm font-semibold text-neutral-300 mb-2\">Front (Prompt)</label>\r\n                    <div className=\"relative\">\r\n                        <textarea\r\n                            {...register(\"front\")}\r\n                            rows={3}\r\n                            onPaste={(e) => handlePaste(e, 'front')}\r\n                            className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all resize-none text-base\"\r\n                            placeholder=\"e.g. What is the powerhouse of the cell? (You can paste or drop images here)\"\r\n                        />\r\n                    </div>\r\n                    {errors.front && <p className=\"text-red-500 text-xs mt-1\">{errors.front.message}</p>}\r\n\r\n                    <div className=\"mt-4\">\r\n                        <label className=\"block text-sm font-medium text-neutral-400 mb-2\">Image (Prompt) - Optional</label>\r\n\r\n                        {showFrontExisting && (\r\n                            <div className=\"relative mb-3 inline-block group\">\r\n                                <img src={card.front_image_url!} alt=\"Current front\" className=\"h-24 object-cover rounded shadow-md border border-neutral-700\" />\r\n                                <button type=\"button\" onClick={() => setClearFrontImage(true)} className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    Ã—\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <input\r\n                                id=\"edit_front_image\"\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                onChange={(e) => {\r\n                                    setFrontImageFile(e.target.files?.[0] || null);\r\n                                    if (e.target.files?.[0]) setClearFrontImage(false);\r\n                                }}\r\n                                disabled={isSubmitting}\r\n                                className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all file:mr-4 file:py-1.5 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-[#f9c111] file:text-black hover:file:bg-[#e0ad0e] disabled:opacity-50 text-sm\"\r\n                            />\r\n                            {frontImageFile && (\r\n                                <span className=\"text-xs text-[#f9c111] font-semibold truncate max-w-[150px]\">\r\n                                    {frontImageFile.name}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Back Side Section */}\r\n                <div\r\n                    className={`pt-2 transition-colors ${isBackDragging ? 'bg-neutral-800/50 rounded-lg p-3' : ''}`}\r\n                    onDragOver={(e) => handleDragOver(e, 'back')}\r\n                    onDragLeave={(e) => handleDragLeave(e, 'back')}\r\n                    onDrop={(e) => handleDrop(e, 'back')}\r\n                >\r\n                    <label className=\"block text-sm font-semibold text-neutral-300 mb-2\">Back (Target Answer)</label>\r\n                    <div className=\"relative\">\r\n                        <textarea\r\n                            {...register(\"back\")}\r\n                            rows={3}\r\n                            onPaste={(e) => handlePaste(e, 'back')}\r\n                            className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all resize-none text-base\"\r\n                            placeholder=\"e.g. Mitochondria (You can paste or drop images here)\"\r\n                        />\r\n                    </div>\r\n                    {errors.back && <p className=\"text-red-500 text-xs mt-1\">{errors.back.message}</p>}\r\n\r\n                    <div className=\"mt-4\">\r\n                        <label className=\"block text-sm font-medium text-neutral-400 mb-2\">Image (Target Answer) - Optional</label>\r\n\r\n                        {showBackExisting && (\r\n                            <div className=\"relative mb-3 inline-block group\">\r\n                                <img src={card.back_image_url!} alt=\"Current back\" className=\"h-24 object-cover rounded shadow-md border border-neutral-700\" />\r\n                                <button type=\"button\" onClick={() => setClearBackImage(true)} className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    Ã—\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <input\r\n                                id=\"edit_back_image\"\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                onChange={(e) => {\r\n                                    setBackImageFile(e.target.files?.[0] || null);\r\n                                    if (e.target.files?.[0]) setClearBackImage(false);\r\n                                }}\r\n                                disabled={isSubmitting}\r\n                                className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[#f9c111] transition-all file:mr-4 file:py-1.5 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-[#f9c111] file:text-black hover:file:bg-[#e0ad0e] disabled:opacity-50 text-sm\"\r\n                            />\r\n                            {backImageFile && (\r\n                                <span className=\"text-xs text-[#f9c111] font-semibold truncate max-w-[150px]\">\r\n                                    {backImageFile.name}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {error && <p className=\"text-red-500 text-sm font-medium\">{error}</p>}\r\n\r\n                <div className=\"flex gap-4 pt-4\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => router.push(`/creator/${deckId}`)}\r\n                        className=\"flex-1 bg-neutral-800 hover:bg-neutral-700 text-white font-bold py-3 px-4 rounded-xl transition-colors disabled:opacity-50\"\r\n                        disabled={isSubmitting}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={isSubmitting}\r\n                        className=\"flex-1 bg-[#f9c111] hover:bg-[#e0ad0e] text-black font-bold py-3 px-4 rounded-xl transition-colors disabled:opacity-50\"\r\n                    >\r\n                        {isSubmitting ? \"Saving...\" : \"Save Changes\"}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\cards\\FlashcardItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\cards\\FlashcardList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\study\\EndScreenButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\study\\EndlessInterface.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":42,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { evaluateAnswer } from \"@/utils/cognitive/fuzzyMatch\";\r\nimport { calculateQualityGrade } from \"@/utils/cognitive/sm2\";\r\nimport { Card, formatTime, shuffleArray } from \"@/utils/study/studyUtils\";\r\nimport Flashcard from \"./Flashcard\";\r\nimport EndScreenButtons from \"./EndScreenButtons\";\r\n\r\nexport default function EndlessInterface({\r\n    cards,\r\n    deckId,\r\n}: {\r\n    cards: Card[];\r\n    deckId: string;\r\n}) {\r\n    const storageKey = `endless-session-${deckId}`;\r\n\r\n    const getSavedSession = () => {\r\n        try {\r\n            const saved = sessionStorage.getItem(storageKey);\r\n            if (saved) {\r\n                const parsed = JSON.parse(saved);\r\n                if (parsed.queueIds && parsed.queueIds.length > 0) {\r\n                    const cardMap = new Map(cards.map((c) => [c.id, c]));\r\n                    const restoredQueue = parsed.queueIds\r\n                        .map((id: string) => cardMap.get(id))\r\n                        .filter(Boolean) as Card[];\r\n                    if (restoredQueue.length > 0) {\r\n                        return {\r\n                            queue: restoredQueue,\r\n                            currentCard: restoredQueue[0],\r\n                            score: parsed.score ?? 0,\r\n                            correctAnswers: parsed.correctAnswers ?? 0,\r\n                            incorrectAnswers: parsed.incorrectAnswers ?? 0,\r\n                            totalCardsSeen: parsed.totalCardsSeen ?? 0,\r\n                            elapsedSeconds: parsed.elapsedSeconds ?? 0,\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n        } catch (e) {\r\n            // Ignore\r\n        }\r\n        return null;\r\n    };\r\n\r\n    const saved = getSavedSession();\r\n\r\n    // Dynamic card queue\r\n    const [queue, setQueue] = useState<Card[]>(saved?.queue ?? [...cards]);\r\n    const [currentCard, setCurrentCard] = useState<Card>(saved?.currentCard ?? cards[0]);\r\n\r\n    const [inputAnswer, setInputAnswer] = useState(\"\");\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(saved?.elapsedSeconds ?? 0);\r\n\r\n    // Game stats\r\n    const [score, setScore] = useState(saved?.score ?? 0);\r\n    const [correctAnswers, setCorrectAnswers] = useState(saved?.correctAnswers ?? 0);\r\n    const [incorrectAnswers, setIncorrectAnswers] = useState(saved?.incorrectAnswers ?? 0);\r\n    const [totalCardsSeen, setTotalCardsSeen] = useState(saved?.totalCardsSeen ?? 0);\r\n\r\n    // UI state\r\n    const [feedbackState, setFeedbackState] = useState<\"question\" | \"feedback_correct\" | \"feedback_incorrect\" | \"finished\">(\"question\");\r\n    const [lastInputAnswer, setLastInputAnswer] = useState(\"\");\r\n\r\n    // Persist session\r\n    useEffect(() => {\r\n        if (feedbackState === \"finished\") {\r\n            sessionStorage.removeItem(storageKey);\r\n            return;\r\n        }\r\n        sessionStorage.setItem(storageKey, JSON.stringify({\r\n            queueIds: queue.map((c) => c.id),\r\n            score,\r\n            correctAnswers,\r\n            incorrectAnswers,\r\n            totalCardsSeen,\r\n            elapsedSeconds,\r\n        }));\r\n    }, [queue, score, correctAnswers, incorrectAnswers, totalCardsSeen, elapsedSeconds, feedbackState, storageKey]);\r\n\r\n    const clearSessionAndReload = () => {\r\n        sessionStorage.removeItem(storageKey);\r\n        window.location.reload();\r\n    };\r\n\r\n    // Timer\r\n    useEffect(() => {\r\n        if (feedbackState === \"finished\") return;\r\n        const interval = setInterval(() => {\r\n            setElapsedSeconds((prev: number) => prev + 1);\r\n        }, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [feedbackState]);\r\n\r\n    // Auto-focus input\r\n    useEffect(() => {\r\n        if (feedbackState === \"question\" && inputRef.current) {\r\n            inputRef.current.focus();\r\n        }\r\n    }, [feedbackState]);\r\n\r\n    const advanceQueue = useCallback((wasIncorrect: boolean, failedCard?: Card) => {\r\n        setQueue((prevQueue) => {\r\n            let newQueue = prevQueue.slice(1);\r\n\r\n            if (wasIncorrect && failedCard) {\r\n                const insertPos = Math.min(\r\n                    3 + Math.floor(Math.random() * 3),\r\n                    newQueue.length,\r\n                );\r\n                newQueue = [\r\n                    ...newQueue.slice(0, insertPos),\r\n                    failedCard,\r\n                    ...newQueue.slice(insertPos),\r\n                ];\r\n            }\r\n\r\n            if (newQueue.length < 3) {\r\n                newQueue = [...newQueue, ...shuffleArray(cards)];\r\n            }\r\n\r\n            setCurrentCard(newQueue[0]);\r\n            return newQueue;\r\n        });\r\n    }, [cards]);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!inputAnswer.trim()) return;\r\n\r\n        const fuzzyScore = evaluateAnswer(inputAnswer, currentCard.back);\r\n        const quality = calculateQualityGrade(fuzzyScore);\r\n\r\n        const isCorrect = quality >= 4;\r\n        const isPerfect = quality === 5;\r\n\r\n        setTotalCardsSeen((prev: number) => prev + 1);\r\n        setLastInputAnswer(inputAnswer);\r\n\r\n        if (isCorrect) {\r\n            setScore((prev: number) => prev + (isPerfect ? 10 : 5));\r\n            setCorrectAnswers((prev: number) => prev + 1);\r\n            setFeedbackState(\"feedback_correct\");\r\n        } else {\r\n            setScore((prev: number) => Math.max(0, prev - 3));\r\n            setIncorrectAnswers((prev: number) => prev + 1);\r\n            setFeedbackState(\"feedback_incorrect\");\r\n        }\r\n\r\n        fetch(`/api/decks/${deckId}/cards/review`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ cardId: currentCard.id, qualityGrade: quality }),\r\n        }).catch((err) => console.error(\"Failed to save review:\", err));\r\n    };\r\n\r\n    const handleNext = () => {\r\n        const wasIncorrect = feedbackState === \"feedback_incorrect\";\r\n        setInputAnswer(\"\");\r\n        advanceQueue(wasIncorrect, wasIncorrect ? currentCard : undefined);\r\n        setFeedbackState(\"question\");\r\n    };\r\n\r\n    if (cards.length === 0) {\r\n        return (\r\n            <div className=\"text-center py-24\">\r\n                <h2 className=\"text-2xl font-bold text-white mb-4\">No Cards</h2>\r\n                <p className=\"text-neutral-400\">Add cards to this deck before studying.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Finished screen\r\n    if (feedbackState === \"finished\") {\r\n        return (\r\n            <div className=\"max-w-2xl mx-auto w-full text-center py-24 animate-in zoom-in duration-500\">\r\n                <h2 className=\"text-5xl md:text-6xl font-black text-[#f9c111] mb-4 tracking-tight drop-shadow-lg\">Session Over</h2>\r\n                <p className=\"text-lg text-neutral-400 mb-12\">\r\n                    You studied for <span className=\"text-white font-bold\">{formatTime(elapsedSeconds)}</span>\r\n                </p>\r\n\r\n                <div className=\"flex flex-col sm:flex-row justify-center gap-8 mb-12 animate-in fade-in slide-in-from-bottom-4 duration-700 delay-200\">\r\n                    <div className=\"flex flex-col items-center\">\r\n                        <span className=\"text-sm font-bold text-neutral-500 uppercase tracking-widest mb-1\">Score</span>\r\n                        <span className=\"text-4xl font-black font-mono tracking-widest text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]\">\r\n                            {score.toString().padStart(4, \"0\")}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center\">\r\n                        <span className=\"text-sm font-bold text-neutral-500 uppercase tracking-widest mb-1\">Right</span>\r\n                        <span className=\"text-4xl font-black font-mono tracking-widest text-green-400 drop-shadow-[0_0_15px_rgba(74,222,128,0.4)]\">\r\n                            {correctAnswers.toString().padStart(2, \"0\")}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center\">\r\n                        <span className=\"text-sm font-bold text-neutral-500 uppercase tracking-widest mb-1\">Wrong</span>\r\n                        <span className=\"text-4xl font-black font-mono tracking-widest text-red-500 drop-shadow-[0_0_15px_rgba(239,68,68,0.4)]\">\r\n                            {incorrectAnswers.toString().padStart(2, \"0\")}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center\">\r\n                        <span className=\"text-sm font-bold text-neutral-500 uppercase tracking-widest mb-1\">Cards Seen</span>\r\n                        <span className=\"text-4xl font-black font-mono tracking-widest text-[#f9c111] drop-shadow-[0_0_15px_rgba(249,193,17,0.4)]\">\r\n                            {totalCardsSeen.toString().padStart(2, \"0\")}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <EndScreenButtons primaryLabel=\"Play Again\" onPrimaryClick={clearSessionAndReload} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const feedbackType = feedbackState === \"feedback_correct\"\r\n        ? \"correct\" as const\r\n        : feedbackState === \"feedback_incorrect\"\r\n            ? \"incorrect\" as const\r\n            : null;\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto w-full\">\r\n            {/* HUD */}\r\n            <div className=\"flex justify-between items-center mb-8 border-b border-neutral-800 pb-4\">\r\n                <div className=\"flex items-center gap-6\">\r\n                    <div className=\"text-lg font-bold font-mono tracking-widest text-neutral-400\">\r\n                        <span className=\"text-white\">{formatTime(elapsedSeconds)}</span>\r\n                    </div>\r\n                    <div className=\"text-lg font-bold font-mono tracking-widest text-neutral-400\">\r\n                        CARDS <span className=\"text-[#f9c111]\">{totalCardsSeen}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-6\">\r\n                    <div className=\"text-xl font-bold font-mono tracking-widest text-white\">\r\n                        SCORE <span className=\"text-[#f9c111]\">{score.toString().padStart(4, \"0\")}</span>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setFeedbackState(\"finished\")}\r\n                        className=\"text-sm font-bold text-neutral-500 hover:text-red-400 transition-colors uppercase tracking-widest border border-neutral-700 hover:border-red-400/50 px-4 py-2 rounded-lg\"\r\n                    >\r\n                        End\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <Flashcard\r\n                card={currentCard}\r\n                isFlipped={feedbackType !== null}\r\n                label=\"Endless Mode\"\r\n                feedbackType={feedbackType}\r\n                feedbackExtra=\"(-3)\"\r\n                userAnswer={lastInputAnswer}\r\n            />\r\n\r\n            {/* Input Area */}\r\n            {feedbackState === \"question\" ? (\r\n                <form onSubmit={handleSubmit} className=\"flex gap-4\">\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        value={inputAnswer}\r\n                        onChange={(e) => setInputAnswer(e.target.value)}\r\n                        placeholder=\"Type your answer...\"\r\n                        autoComplete=\"off\"\r\n                        className=\"flex-1 bg-neutral-900 border-2 border-neutral-800 rounded-xl px-6 py-4 text-xl text-white focus:outline-none focus:border-[#f9c111] transition-colors shadow-inner\"\r\n                    />\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"bg-[#f9c111] hover:bg-yellow-400 text-black font-bold px-8 rounded-xl transition-all shadow-[0_4px_14px_0_rgba(249,193,17,0.39)] hover:shadow-[0_6px_20px_rgba(249,193,17,0.23)] hover:-translate-y-0.5\"\r\n                    >\r\n                        Submit\r\n                    </button>\r\n                </form>\r\n            ) : (\r\n                <button\r\n                    onClick={handleNext}\r\n                    autoFocus\r\n                    className=\"w-full bg-neutral-800 hover:bg-neutral-700 text-white font-bold py-4 rounded-xl transition-colors border-2 border-neutral-700 focus:border-[#f9c111] focus:outline-none\"\r\n                >\r\n                    Continue (Press Enter)\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\study\\Flashcard.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":44,"column":25,"nodeType":"JSXOpeningElement","endLine":48,"endColumn":27},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":63,"column":25,"nodeType":"JSXOpeningElement","endLine":67,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Card, getDifficultyLabel } from \"@/utils/study/studyUtils\";\r\n\r\ninterface FlashcardProps {\r\n    card: Card;\r\n    isFlipped: boolean;\r\n    label: string; // e.g. \"Card 1 of 10\" or \"Endless Mode\"\r\n    feedbackType: \"correct\" | \"incorrect\" | null;\r\n    feedbackExtra?: string; // e.g. penalty text like \"(-3)\"\r\n    userAnswer?: string;\r\n}\r\n\r\nexport default function Flashcard({\r\n    card,\r\n    isFlipped,\r\n    label,\r\n    feedbackType,\r\n    feedbackExtra,\r\n    userAnswer,\r\n}: FlashcardProps) {\r\n    return (\r\n        <div className=\"perspective-1000 mb-12\">\r\n            <div\r\n                className={`relative w-full h-[28rem] transition-transform preserve-3d shadow-2xl ${!isFlipped ? \"duration-0\" : \"duration-700 rotate-x-180\"\r\n                    }`}\r\n            >\r\n                {/* Front */}\r\n                <div className=\"absolute inset-0 backface-hidden bg-neutral-900 border-2 border-neutral-800 rounded-3xl p-8 flex flex-col justify-center items-center text-center z-10 overflow-y-auto\">\r\n                    <span className=\"absolute top-6 left-6 text-neutral-500 text-xs font-bold uppercase tracking-widest\">\r\n                        {label}\r\n                    </span>\r\n\r\n                    {card.ease_factor !== undefined && (() => {\r\n                        const { label: diffLabel, color } = getDifficultyLabel(card.ease_factor!);\r\n                        return (\r\n                            <span className={`absolute top-6 right-6 text-xs font-bold uppercase tracking-widest ${color}`}>\r\n                                {diffLabel}\r\n                            </span>\r\n                        );\r\n                    })()}\r\n\r\n                    {card.front_image_url && (\r\n                        <img\r\n                            src={card.front_image_url}\r\n                            alt=\"Front Image\"\r\n                            className=\"min-w-[250px] min-h-[200px] max-h-[336px] max-w-[90%] object-contain mb-6 rounded-lg shadow-md border border-neutral-700 bg-neutral-950/50\"\r\n                        />\r\n                    )}\r\n\r\n                    <h2 className=\"text-3xl font-semibold text-white leading-tight\">\r\n                        {card.front}\r\n                    </h2>\r\n                </div>\r\n\r\n                {/* Back */}\r\n                <div className=\"absolute inset-0 backface-hidden rotate-x-180 bg-neutral-900 border-2 border-neutral-800 rounded-3xl p-8 flex flex-col justify-center items-center text-center overflow-y-auto\">\r\n                    <span className=\"absolute top-6 left-6 text-neutral-500 text-xs font-bold uppercase tracking-widest\">\r\n                        Target Answer\r\n                    </span>\r\n\r\n                    {card.back_image_url && (\r\n                        <img\r\n                            src={card.back_image_url}\r\n                            alt=\"Back Image\"\r\n                            className=\"min-w-[250px] min-h-[200px] max-h-[336px] max-w-[90%] object-contain mb-6 rounded-lg shadow-md border border-neutral-700 bg-neutral-950/50\"\r\n                        />\r\n                    )}\r\n\r\n                    <h2 className=\"text-3xl font-semibold text-[#f9c111] leading-tight mb-8\">\r\n                        {card.back}\r\n                    </h2>\r\n\r\n                    {feedbackType === \"correct\" && (\r\n                        <div className=\"text-green-500 text-xl font-bold bg-green-500/10 px-8 py-3 rounded-full border border-green-500/20 animate-in slide-in-from-bottom-4 duration-300\">\r\n                            Correct!\r\n                        </div>\r\n                    )}\r\n                    {feedbackType === \"incorrect\" && (\r\n                        <div className=\"text-red-500 text-xl font-bold bg-red-500/10 px-8 py-3 rounded-full border border-red-500/20 animate-in slide-in-from-bottom-4 duration-300 flex flex-col items-center\">\r\n                            <span>Incorrect{feedbackExtra ? ` ${feedbackExtra}` : \"\"}</span>\r\n                            {userAnswer && (\r\n                                <span className=\"text-sm font-normal text-neutral-400 mt-1\">\r\n                                    You wrote: &quot;{userAnswer}&quot;\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\study\\StudyDeckCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\components\\study\\StudyInterface.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":36,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useMachine } from \"@xstate/react\";\r\nimport { classicModeMachine } from \"@/machines/classicModeMachine\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { evaluateAnswer } from \"@/utils/cognitive/fuzzyMatch\";\r\nimport { calculateQualityGrade } from \"@/utils/cognitive/sm2\";\r\nimport { Card } from \"@/utils/study/studyUtils\";\r\nimport Flashcard from \"./Flashcard\";\r\nimport EndScreenButtons from \"./EndScreenButtons\";\r\n\r\nexport default function StudyInterface({\r\n    cards,\r\n    deckId,\r\n}: {\r\n    cards: Card[];\r\n    deckId: string;\r\n}) {\r\n    const storageKey = `study-session-${deckId}`;\r\n\r\n    const getSavedState = () => {\r\n        try {\r\n            const saved = sessionStorage.getItem(storageKey);\r\n            if (saved) {\r\n                const parsed = JSON.parse(saved);\r\n                if (parsed.context && parsed.context.cards?.length === cards.length) {\r\n                    return classicModeMachine.resolveState({\r\n                        value: parsed.stateValue,\r\n                        context: {\r\n                            ...parsed.context,\r\n                            cards,\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n        } catch (e) {\r\n            // Ignore parse errors\r\n        }\r\n        return classicModeMachine.resolveState({\r\n            value: \"question\",\r\n            context: {\r\n                cards,\r\n                currentIndex: 0,\r\n                lives: 5,\r\n                score: 0,\r\n                correctAnswers: 0,\r\n                incorrectAnswers: 0,\r\n                gameStatus: \"playing\",\r\n            },\r\n        });\r\n    };\r\n\r\n    const [state, send] = useMachine(classicModeMachine, {\r\n        state: getSavedState(),\r\n    });\r\n\r\n    // Persist playing state to sessionStorage\r\n    useEffect(() => {\r\n        const { context } = state;\r\n        if (context.gameStatus === \"playing\") {\r\n            sessionStorage.setItem(storageKey, JSON.stringify({\r\n                stateValue: state.value,\r\n                context: {\r\n                    currentIndex: context.currentIndex,\r\n                    lives: context.lives,\r\n                    score: context.score,\r\n                    correctAnswers: context.correctAnswers,\r\n                    incorrectAnswers: context.incorrectAnswers,\r\n                    gameStatus: context.gameStatus,\r\n                    cards: context.cards.map((c: Card) => ({ id: c.id })),\r\n                },\r\n            }));\r\n        } else {\r\n            sessionStorage.removeItem(storageKey);\r\n        }\r\n    }, [state, storageKey]);\r\n\r\n    const clearSessionAndReload = () => {\r\n        sessionStorage.removeItem(storageKey);\r\n        window.location.reload();\r\n    };\r\n\r\n    const [inputAnswer, setInputAnswer] = useState(\"\");\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const { currentIndex, lives, score, correctAnswers, incorrectAnswers, gameStatus } = state.context;\r\n    const currentCard = cards[currentIndex];\r\n\r\n    useEffect(() => {\r\n        if (state.value === \"question\" && inputRef.current) {\r\n            inputRef.current.focus();\r\n        }\r\n    }, [state.value]);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!inputAnswer.trim()) return;\r\n\r\n        const fuzzyScore = evaluateAnswer(inputAnswer, currentCard.back);\r\n        const quality = calculateQualityGrade(fuzzyScore);\r\n\r\n        send({ type: \"SUBMIT_ANSWER\", isCorrect: quality >= 4, isPerfect: quality === 5 });\r\n\r\n        fetch(`/api/decks/${deckId}/cards/review`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ cardId: currentCard.id, qualityGrade: quality }),\r\n        }).catch((err) => console.error(\"Failed to save review:\", err));\r\n    };\r\n\r\n    const handleNext = () => {\r\n        setInputAnswer(\"\");\r\n        send({ type: \"NEXT_CARD\" });\r\n    };\r\n\r\n    if (cards.length === 0) {\r\n        return (\r\n            <div className=\"text-center py-24\">\r\n                <h2 className=\"text-2xl font-bold text-white mb-4\">No Cards</h2>\r\n                <p className=\"text-neutral-400\">Add cards to this deck before studying.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderMetrics = () => (\r\n        <div className=\"flex flex-col sm:flex-row justify-center gap-8 mb-12 animate-in fade-in slide-in-from-bottom-4 duration-700 delay-200\">\r\n            <div className=\"flex flex-col items-center\">\r\n                <span className=\"text-sm font-bold text-neutral-500 uppercase tracking-widest mb-1\">Score</span>\r\n                <span className=\"text-4xl font-black font-mono tracking-widest text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]\">\r\n                    {(score ?? 0).toString().padStart(4, \"0\")}\r\n                </span>\r\n            </div>\r\n            <div className=\"flex flex-col items-center\">\r\n                <span className=\"text-sm font-bold text-neutral-500 uppercase tracking-widest mb-1\">Right</span>\r\n                <span className=\"text-4xl font-black font-mono tracking-widest text-green-400 drop-shadow-[0_0_15px_rgba(74,222,128,0.4)]\">\r\n                    {(correctAnswers ?? 0).toString().padStart(2, \"0\")}\r\n                </span>\r\n            </div>\r\n            <div className=\"flex flex-col items-center\">\r\n                <span className=\"text-sm font-bold text-neutral-500 uppercase tracking-widest mb-1\">Wrong</span>\r\n                <span className=\"text-4xl font-black font-mono tracking-widest text-red-500 drop-shadow-[0_0_15px_rgba(239,68,68,0.4)]\">\r\n                    {(incorrectAnswers ?? 0).toString().padStart(2, \"0\")}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (gameStatus === \"game_over\") {\r\n        return (\r\n            <div className=\"max-w-2xl mx-auto w-full text-center py-24 animate-in zoom-in duration-500\">\r\n                <h2 className=\"text-5xl md:text-6xl font-black text-red-500 mb-2 tracking-tight drop-shadow-lg\">Game Over</h2>\r\n                <p className=\"text-xl text-neutral-400 mb-12\">You ran out of lives!</p>\r\n                {renderMetrics()}\r\n                <EndScreenButtons primaryLabel=\"Try Again\" onPrimaryClick={clearSessionAndReload} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (gameStatus === \"session_over\") {\r\n        return (\r\n            <div className=\"max-w-2xl mx-auto w-full text-center py-24 animate-in zoom-in duration-500\">\r\n                <h2 className=\"text-5xl md:text-6xl font-black text-[#f9c111] mb-4 tracking-tight drop-shadow-lg\">Session Over</h2>\r\n                <p className=\"text-xl text-neutral-400 mb-12\">You ended the session early.</p>\r\n                {renderMetrics()}\r\n                <EndScreenButtons primaryLabel=\"Try Again\" onPrimaryClick={clearSessionAndReload} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (gameStatus === \"completed\") {\r\n        return (\r\n            <div className=\"max-w-2xl mx-auto w-full text-center py-24 animate-in zoom-in duration-500\">\r\n                <h2 className=\"text-5xl md:text-6xl font-black text-[#f9c111] mb-12 tracking-tight drop-shadow-lg\">Deck Complete!</h2>\r\n                {renderMetrics()}\r\n                <EndScreenButtons primaryLabel=\"Study Again\" onPrimaryClick={clearSessionAndReload} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const feedbackType = state.value === \"feedback_correct\"\r\n        ? \"correct\" as const\r\n        : state.value === \"feedback_incorrect\"\r\n            ? \"incorrect\" as const\r\n            : null;\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto w-full\">\r\n            {/* HUD */}\r\n            <div className=\"flex justify-between items-center mb-8 border-b border-neutral-800 pb-4\">\r\n                <div className=\"flex gap-2 text-2xl\">\r\n                    {Array.from({ length: 5 }).map((_, i) => (\r\n                        <span key={i} className={i < lives ? \"text-red-500 drop-shadow-[0_0_8px_rgba(239,68,68,0.5)]\" : \"text-neutral-800\"}>\r\n                            &hearts;\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n                <div className=\"flex items-center gap-6\">\r\n                    <div className=\"text-xl font-bold font-mono tracking-widest text-white\">\r\n                        SCORE <span className=\"text-[#f9c111]\">{score.toString().padStart(4, \"0\")}</span>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => send({ type: \"QUIT\" })}\r\n                        className=\"text-sm font-bold text-neutral-500 hover:text-red-400 transition-colors uppercase tracking-widest border border-neutral-700 hover:border-red-400/50 px-4 py-2 rounded-lg\"\r\n                    >\r\n                        End\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"w-full bg-neutral-900 rounded-full h-2 mb-12 overflow-hidden border border-neutral-800\">\r\n                <div\r\n                    className=\"bg-[#f9c111] h-2 rounded-full transition-all duration-500 ease-out shadow-[0_0_10px_rgba(249,193,17,0.5)]\"\r\n                    style={{ width: `${((currentIndex) / cards.length) * 100}%` }}\r\n                ></div>\r\n            </div>\r\n\r\n            <Flashcard\r\n                card={currentCard}\r\n                isFlipped={feedbackType !== null}\r\n                label={`Card ${currentIndex + 1} of ${cards.length}`}\r\n                feedbackType={feedbackType}\r\n                userAnswer={inputAnswer}\r\n            />\r\n\r\n            {/* Input Area */}\r\n            {state.value === \"question\" ? (\r\n                <form onSubmit={handleSubmit} className=\"flex gap-4\">\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        value={inputAnswer}\r\n                        onChange={(e) => setInputAnswer(e.target.value)}\r\n                        placeholder=\"Type your answer...\"\r\n                        autoComplete=\"off\"\r\n                        className=\"flex-1 bg-neutral-900 border-2 border-neutral-800 rounded-xl px-6 py-4 text-xl text-white focus:outline-none focus:border-[#f9c111] transition-colors shadow-inner\"\r\n                    />\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"bg-[#f9c111] hover:bg-yellow-400 text-black font-bold px-8 rounded-xl transition-all shadow-[0_4px_14px_0_rgba(249,193,17,0.39)] hover:shadow-[0_6px_20px_rgba(249,193,17,0.23)] hover:-translate-y-0.5\"\r\n                    >\r\n                        Submit\r\n                    </button>\r\n                </form>\r\n            ) : (\r\n                <button\r\n                    onClick={handleNext}\r\n                    autoFocus\r\n                    className=\"w-full bg-neutral-800 hover:bg-neutral-700 text-white font-bold py-4 rounded-xl transition-colors border-2 border-neutral-700 focus:border-[#f9c111] focus:outline-none\"\r\n                >\r\n                    {state.value === \"feedback_incorrect\" && lives === 0\r\n                        ? \"Finish Game\"\r\n                        : \"Continue (Press Enter)\"}\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\creator\\[deckId]\\cards\\[cardId]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\creator\\[deckId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\creator\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[352,355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[352,355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getServerSession } from \"next-auth/next\";\r\nimport { authOptions } from \"../api/auth/[...nextauth]/route\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nexport default async function CreatorLayout({ children }: { children: React.ReactNode }) {\r\n    const session = await getServerSession(authOptions);\r\n\r\n    if (!session || (session.user as any).role !== \"ADMIN\") {\r\n        redirect(\"/login\");\r\n    }\r\n\r\n    return <>{children}</>;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\creator\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[88,118],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[943,946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[943,946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import prisma from \"@/lib/prisma\";\nimport DeckManager from \"../components/DeckManager\";\nimport Link from \"next/link\";\n\nexport const dynamic = \"force-dynamic\";\n\nexport default async function Home() {\n  const decks = await prisma.decks.findMany({\n    include: {\n      _count: {\n        select: { cards: true },\n      },\n    },\n    orderBy: {\n      title: \"asc\",\n    },\n  });\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-8\">\n      <main className=\"max-w-6xl mx-auto space-y-12 animate-in fade-in duration-1000\">\n        <header className=\"flex justify-between items-end border-b border-neutral-800 pb-6\">\n          <div>\n            <h1 className=\"text-4xl font-extrabold tracking-tight\">LevelUp <span className=\"text-[#f9c111]\">Creator</span></h1>\n            <p className=\"text-neutral-400 mt-2 text-lg\">Manage your decks and flashcards.</p>\n          </div>\n        </header>\n\n        <DeckManager initialDecks={decks as any} />\n      </main>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":55,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":21},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":75,"column":21,"nodeType":"JSXOpeningElement","endLine":79,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { signIn } from \"next-auth/react\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isLogin, setIsLogin] = useState(true);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [firstName, setFirstName] = useState(\"\");\r\n    const [lastName, setLastName] = useState(\"\");\r\n    const [username, setUsername] = useState(\"\");\r\n    const [university, setUniversity] = useState(\"\");\r\n    const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n    const handleCredentialsSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setErrorMsg(\"\");\r\n\r\n        try {\r\n            if (!isLogin) {\r\n                // Register flow\r\n                const res = await fetch(\"/api/auth/register\", {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ email, password, firstName, lastName, username, university }),\r\n                });\r\n\r\n                const data = await res.json();\r\n\r\n                if (!res.ok) {\r\n                    setErrorMsg(data.message || \"Something went wrong.\");\r\n                    setIsLoading(false);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Logging in (works for both existing users and right after registration)\r\n            const res = await signIn(\"credentials\", {\r\n                redirect: false,\r\n                email,\r\n                password,\r\n            });\r\n\r\n            if (res?.error) {\r\n                setErrorMsg(\"Invalid credentials. Please try again.\");\r\n            } else {\r\n                router.push(\"/study\");\r\n            }\r\n        } catch (err) {\r\n            setErrorMsg(\"An unexpected error occurred.\");\r\n        }\r\n\r\n        setIsLoading(false);\r\n    };\r\n\r\n    const handleGoogleLogin = async () => {\r\n        setIsLoading(true);\r\n        await signIn(\"google\", {\r\n            callbackUrl: \"/study\",\r\n        });\r\n        setIsLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-black text-white flex items-center justify-center p-4\">\r\n            <div className=\"max-w-md w-full bg-neutral-900 border border-neutral-800 rounded-2xl p-8 shadow-2xl space-y-8 animate-in fade-in duration-500\">\r\n\r\n                <div className=\"text-center space-y-2\">\r\n                    <img\r\n                        src=\"/logo4.png\"\r\n                        alt=\"LevelUp Auth\"\r\n                        className=\"h-72 w-auto object-contain mx-auto\"\r\n                    />\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleGoogleLogin}\r\n                    disabled={isLoading}\r\n                    className=\"w-full bg-white text-black font-semibold py-3 px-4 rounded-xl flex items-center justify-center gap-3 hover:bg-neutral-200 transition-colors disabled:opacity-50\"\r\n                >\r\n                    <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\" aria-hidden=\"true\">\r\n                        <path d=\"M12.0003 4.75C13.7703 4.75 15.3553 5.36002 16.6053 6.54998L20.0303 3.125C17.9502 1.19 15.2353 0 12.0003 0C7.31028 0 3.25527 2.69 1.28027 6.60998L5.27028 9.70498C6.21525 6.86002 8.87028 4.75 12.0003 4.75Z\" fill=\"#EA4335\" />\r\n                        <path d=\"M23.49 12.275C23.49 11.49 23.415 10.73 23.3 10H12V14.51H18.47C18.18 15.99 17.34 17.25 16.08 18.1L19.945 21.1C22.2 19.01 23.49 15.92 23.49 12.275Z\" fill=\"#4285F4\" />\r\n                        <path d=\"M5.26498 14.2949C5.02498 13.5699 4.88501 12.7999 4.88501 11.9999C4.88501 11.1999 5.01998 10.4299 5.26498 9.7049L1.275 6.60986C0.46 8.22986 0 10.0599 0 11.9999C0 13.9399 0.46 15.7699 1.28 17.3899L5.26498 14.2949Z\" fill=\"#FBBC05\" />\r\n                        <path d=\"M12.0004 24C15.2404 24 17.9654 22.935 19.9454 21.095L16.0804 18.095C15.0054 18.82 13.6204 19.245 12.0004 19.245C8.8704 19.245 6.21537 17.135 5.26537 14.29L1.27539 17.385C3.25539 21.31 7.3104 24 12.0004 24Z\" fill=\"#34A853\" />\r\n                    </svg>\r\n                    Continue with Google\r\n                </button>\r\n\r\n                <div className=\"relative\">\r\n                    <div className=\"absolute inset-0 flex items-center\">\r\n                        <div className=\"w-full border-t border-neutral-800\"></div>\r\n                    </div>\r\n                    <div className=\"relative flex justify-center text-sm\">\r\n                        <span className=\"px-2 bg-neutral-900 text-neutral-500\">Or continue with email</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <form onSubmit={handleCredentialsSubmit} className=\"space-y-4\">\r\n\r\n                    {!isLogin && (\r\n                        <>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-sm font-medium text-neutral-400\">First Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        value={firstName}\r\n                                        onChange={(e) => setFirstName(e.target.value)}\r\n                                        disabled={isLoading}\r\n                                        className=\"w-full bg-black border border-neutral-800 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-[#f9c111] transition-colors\"\r\n                                        placeholder=\"John\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <label className=\"text-sm font-medium text-neutral-400\">Last Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        value={lastName}\r\n                                        onChange={(e) => setLastName(e.target.value)}\r\n                                        disabled={isLoading}\r\n                                        className=\"w-full bg-black border border-neutral-800 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-[#f9c111] transition-colors\"\r\n                                        placeholder=\"Doe\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-sm font-medium text-neutral-400\">Username</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    required\r\n                                    value={username}\r\n                                    onChange={(e) => setUsername(e.target.value)}\r\n                                    disabled={isLoading}\r\n                                    className=\"w-full bg-black border border-neutral-800 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-[#f9c111] transition-colors\"\r\n                                    placeholder=\"johndoe123\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-sm font-medium text-neutral-400\">University</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    required\r\n                                    value={university}\r\n                                    onChange={(e) => setUniversity(e.target.value)}\r\n                                    disabled={isLoading}\r\n                                    className=\"w-full bg-black border border-neutral-800 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-[#f9c111] transition-colors\"\r\n                                    placeholder=\"Harvard University\"\r\n                                />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium text-neutral-400\">{isLogin ? \"Username or Email\" : \"Email Address\"}</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            required\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            disabled={isLoading}\r\n                            className=\"w-full bg-black border border-neutral-800 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-[#f9c111] transition-colors\"\r\n                            placeholder=\"student@example.com\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium text-neutral-400\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            required\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            disabled={isLoading}\r\n                            className=\"w-full bg-black border border-neutral-800 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-[#f9c111] transition-colors\"\r\n                            placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\r\n                        />\r\n                    </div>\r\n\r\n                    {errorMsg && (\r\n                        <p className=\"text-red-400 text-sm\">{errorMsg}</p>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={isLoading}\r\n                        className=\"w-full bg-[#f9c111] hover:bg-[#e0ad0e] text-black font-bold py-3 px-4 rounded-xl transition-colors disabled:opacity-50\"\r\n                    >\r\n                        {isLogin ? \"Sign In\" : \"Create Account\"}\r\n                    </button>\r\n                </form>\r\n\r\n                <p className=\"text-center text-sm text-neutral-400 pt-2\">\r\n                    {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => setIsLogin(!isLogin)}\r\n                        className=\"text-[#f9c111] hover:underline transition-all\"\r\n                    >\r\n                        {isLogin ? \"Sign Up\" : \"Sign In\"}\r\n                    </button>\r\n                </p>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":40,"column":29,"nodeType":"JSXOpeningElement","endLine":44,"endColumn":31},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":48,"column":102,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2398,2560],"text":"\r\n                            Advanced spaced repetition algorithm guarantees you never forget what you&apos;ve learnt. Start studying today!\r\n                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2398,2560],"text":"\r\n                            Advanced spaced repetition algorithm guarantees you never forget what you&lsquo;ve learnt. Start studying today!\r\n                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2398,2560],"text":"\r\n                            Advanced spaced repetition algorithm guarantees you never forget what you&#39;ve learnt. Start studying today!\r\n                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2398,2560],"text":"\r\n                            Advanced spaced repetition algorithm guarantees you never forget what you&rsquo;ve learnt. Start studying today!\r\n                        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from \"next/link\";\r\nimport { ArrowRight, BookOpen, Brain, Zap } from \"lucide-react\";\r\n\r\nexport default function LandingPage() {\r\n    return (\r\n        <div className=\"min-h-screen bg-black text-white selection:bg-[#f9c111] selection:text-black font-sans\">\r\n\r\n            {/* Header / Navbar */}\r\n            <header className=\"fixed top-0 w-full z-50 bg-black/50 backdrop-blur-md border-b border-white/10\">\r\n                <div className=\"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                    </div>\r\n\r\n                    <nav className=\"flex items-center gap-6\">\r\n                        <Link\r\n                            href=\"/login\"\r\n                            className=\"text-sm font-medium text-neutral-300 hover:text-white transition-colors\"\r\n                        >\r\n                            Sign In\r\n                        </Link>\r\n                        <Link\r\n                            href=\"/login\"\r\n                            className=\"text-sm font-bold bg-white text-black px-5 py-2.5 rounded-full hover:bg-neutral-200 transition-transform hover:scale-105 active:scale-95\"\r\n                        >\r\n                            Sign Up Free\r\n                        </Link>\r\n                    </nav>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Hero Section */}\r\n            <main>\r\n                <section className=\"relative pt-40 pb-32 px-6 overflow-hidden\">\r\n\r\n                    {/* Decorative glow */}\r\n                    <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-[#f9c111]/20 blur-[120px] rounded-full pointer-events-none\" />\r\n\r\n                    <div className=\"relative max-w-5xl mx-auto text-center space-y-8 animate-in fade-in slide-in-from-bottom-8 duration-1000\">\r\n                        <div className=\"flex justify-center w-full mb-8\">\r\n                            <img\r\n                                src=\"/logo4.png\"\r\n                                alt=\"Master any subject, faster than ever.\"\r\n                                className=\"h-56 w-auto object-contain drop-shadow-2xl\"\r\n                            />\r\n                        </div>\r\n\r\n                        <p className=\"text-xl md:text-2xl text-neutral-400 max-w-2xl mx-auto leading-relaxed\">\r\n                            Advanced spaced repetition algorithm guarantees you never forget what you've learnt. Start studying today!\r\n                        </p>\r\n\r\n                        <div className=\"pt-8 flex flex-col sm:flex-row items-center justify-center gap-4\">\r\n                            <Link\r\n                                href=\"/login\"\r\n                                className=\"group flex items-center gap-2 bg-[#f9c111] text-black font-bold text-lg px-8 py-4 rounded-full hover:bg-[#e0ad0e] transition-all hover:scale-105\"\r\n                            >\r\n                                Get Started\r\n                                <ArrowRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Features Section */}\r\n                <section className=\"py-24 px-6 border-t border-white/5 bg-neutral-950\">\r\n                    <div className=\"max-w-7xl mx-auto\">\r\n                        <div className=\"grid md:grid-cols-3 gap-8\">\r\n\r\n                            <div className=\"bg-black border border-white/10 p-8 rounded-3xl hover:border-white/20 transition-colors\">\r\n                                <div className=\"w-12 h-12 bg-[#f9c111]/10 rounded-2xl flex items-center justify-center mb-6 text-[#f9c111]\">\r\n                                    <Brain size={24} />\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold mb-3\">Spaced Repetition</h3>\r\n                                <p className=\"text-neutral-400 leading-relaxed\">\r\n                                    Our SM-2 algorithm calculates the precise moment you need to review a card before you forget it, guaranteeing maximum retention.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"bg-black border border-white/10 p-8 rounded-3xl hover:border-white/20 transition-colors\">\r\n                                <div className=\"w-12 h-12 bg-[#f9c111]/10 rounded-2xl flex items-center justify-center mb-6 text-[#f9c111]\">\r\n                                    <Zap size={24} />\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold mb-3\">Lightning Fast</h3>\r\n                                <p className=\"text-neutral-400 leading-relaxed\">\r\n                                    A distraction-free interface built for speed. Use keyboard shortcuts to flip cards and rate your memory instantly.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"bg-black border border-white/10 p-8 rounded-3xl hover:border-white/20 transition-colors\">\r\n                                <div className=\"w-12 h-12 bg-[#f9c111]/10 rounded-2xl flex items-center justify-center mb-6 text-[#f9c111]\">\r\n                                    <BookOpen size={24} />\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold mb-3\">Custom Decks</h3>\r\n                                <p className=\"text-neutral-400 leading-relaxed\">\r\n                                    Create rich flashcards with full formatting. Organize your knowledge into decks and study precisely what you want.\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </main>\r\n\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\app\\study\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":23,"column":13,"nodeType":"JSXOpeningElement","endLine":27,"endColumn":15},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":37,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1212,1268],"text":"You don&apos;t have any decks yet. Create one to get started."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1212,1268],"text":"You don&lsquo;t have any decks yet. Create one to get started."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1212,1268],"text":"You don&#39;t have any decks yet. Create one to get started."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1212,1268],"text":"You don&rsquo;t have any decks yet. Create one to get started."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import prisma from \"@/lib/prisma\";\nimport StudyDeckCard from \"@/app/components/study/StudyDeckCard\";\n\nexport const dynamic = \"force-dynamic\";\n\nexport default async function Home() {\n  const decks = await prisma.decks.findMany({\n    include: {\n      _count: {\n        select: { cards: true },\n      },\n    },\n    orderBy: {\n      title: \"asc\",\n    },\n  });\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-8\">\n      <main className=\"max-w-6xl mx-auto space-y-12 animate-in fade-in duration-1000\">\n        <header className=\"flex justify-between items-end border-b border-neutral-800 pb-6\">\n          <div>\n            <img\n              src=\"/Logo3.png\"\n              alt=\"LevelUp Student\"\n              className=\"h-20 w-auto object-contain drop-shadow-md\"\n            />\n          </div>\n        </header>\n\n        <section className=\"max-w-4xl mx-auto\">\n          <div className=\"w-full\">\n            <h2 className=\"text-2xl font-bold mb-6 border-b border-neutral-800 pb-2\">Your Study Decks</h2>\n\n            {decks.length === 0 ? (\n              <div className=\"bg-neutral-900 border border-neutral-800 rounded-xl p-12 text-center shadow-lg\">\n                <p className=\"text-neutral-400\">You don't have any decks yet. Create one to get started.</p>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                {decks.map((deck: { id: string; title: string; _count: { cards: number } }) => (\n                  <StudyDeckCard key={deck.id} deck={deck} />\n                ))}\n              </div>\n            )}\n          </div>\n        </section>\n      </main>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\lib\\prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\machines\\classicModeMachine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\proxy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\utils\\cognitive\\fuzzyMatch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\utils\\cognitive\\sm2.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'previousInterval' is defined but never used.","line":40,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * SuperMemo-2 (SM-2) Spaced Repetition Algorithm Implementation\r\n */\r\n\r\nexport interface SM2Result {\r\n    ease_factor: number;\r\n    interval: number;\r\n    repetitions: number;\r\n    next_review: Date;\r\n}\r\n\r\n/**\r\n * Derives a quality grade (0 to 5) from the user's fuzzy typing score.\r\n * \r\n * Score Map:\r\n * - 0: Complete blackout (score < 0.2)\r\n * - 1: Incorrect, but remembered later (score < 0.4)\r\n * - 2: Incorrect, but seemed easy to recall (score < 0.6)\r\n * - 3: Correct, but required significant difficulty (score < 0.8)\r\n * - 4: Correct after hesitation (score < 0.95)\r\n * - 5: Perfect response (score >= 0.95)\r\n */\r\nexport function calculateQualityGrade(fuzzyScore: number): number {\r\n    if (fuzzyScore >= 0.95) return 5;\r\n    if (fuzzyScore >= 0.80) return 4;\r\n    if (fuzzyScore >= 0.60) return 3;\r\n    if (fuzzyScore >= 0.40) return 2;\r\n    if (fuzzyScore >= 0.20) return 1;\r\n    return 0; // complete failure\r\n}\r\n\r\n/**\r\n * Executes the SM-2 algorithm logic to determine the next review date\r\n * based on the quality of the current review.\r\n */\r\nexport function calculateSM2(\r\n    qualityGrade: number,\r\n    repetitions: number,\r\n    previousEaseFactor: number,\r\n    previousInterval: number\r\n): SM2Result {\r\n    let newEaseFactor = previousEaseFactor;\r\n    let newRepetitions = repetitions;\r\n\r\n    // Fixed interval schedule (capped at 28 days)\r\n    const INTERVAL_STEPS = [1, 2, 5, 7, 14, 28];\r\n\r\n    let newInterval: number;\r\n\r\n    // Grade < 3 means the user \"failed\" the card.\r\n    if (qualityGrade < 3) {\r\n        newRepetitions = 0;\r\n        newInterval = 1; // reset to 1 day\r\n    } else {\r\n        // User passed the card\r\n        newRepetitions = repetitions + 1;\r\n\r\n        // Use the fixed schedule, capping at the last step (28 days)\r\n        const stepIndex = Math.min(newRepetitions - 1, INTERVAL_STEPS.length - 1);\r\n        newInterval = INTERVAL_STEPS[stepIndex];\r\n    }\r\n\r\n    // Update ease factor: EF' = EF + (0.1 - (5 - q) * (0.08 + (5 - q) * 0.02))\r\n    newEaseFactor =\r\n        previousEaseFactor +\r\n        (0.1 - (5 - qualityGrade) * (0.08 + (5 - qualityGrade) * 0.02));\r\n\r\n    // Enforce absolute floor for EF = 1.3\r\n    if (newEaseFactor < 1.3) {\r\n        newEaseFactor = 1.3;\r\n    }\r\n\r\n    // Determine next review date\r\n    const nextReviewDate = new Date();\r\n    nextReviewDate.setDate(nextReviewDate.getDate() + newInterval);\r\n\r\n    return {\r\n        ease_factor: Number(newEaseFactor.toFixed(3)),\r\n        interval: newInterval,\r\n        repetitions: newRepetitions,\r\n        next_review: nextReviewDate,\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\utils\\study\\studyUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\utils\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\utils\\supabase\\middleware.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'options' is defined but never used.","line":18,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createServerClient } from '@supabase/ssr'\r\nimport { NextResponse, type NextRequest } from 'next/server'\r\n\r\nexport async function updateSession(request: NextRequest) {\r\n    let supabaseResponse = NextResponse.next({\r\n        request,\r\n    })\r\n\r\n    const supabase = createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return request.cookies.getAll()\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    cookiesToSet.forEach(({ name, value, options }) => request.cookies.set(name, value))\r\n                    supabaseResponse = NextResponse.next({\r\n                        request,\r\n                    })\r\n                    cookiesToSet.forEach(({ name, value, options }) =>\r\n                        supabaseResponse.cookies.set(name, value, options)\r\n                    )\r\n                },\r\n            },\r\n        }\r\n    )\r\n\r\n    // IMPORTANT: Avoid writing any logic between createServerClient and\r\n    // supabase.auth.getUser(). A simple mistake could make it very hard to debug\r\n    // issues with users being randomly logged out.\r\n\r\n    const {\r\n        data: { user },\r\n    } = await supabase.auth.getUser()\r\n\r\n    if (\r\n        !user &&\r\n        !request.nextUrl.pathname.startsWith('/login') &&\r\n        !request.nextUrl.pathname.startsWith('/auth') &&\r\n        !request.nextUrl.pathname.startsWith('/api') &&\r\n        request.nextUrl.pathname !== '/'\r\n    ) {\r\n        // no user, potentially respond by redirecting the user to the login page\r\n        const url = request.nextUrl.clone()\r\n        url.pathname = '/login'\r\n        return NextResponse.redirect(url)\r\n    }\r\n\r\n    // IMPORTANT: You *must* return the supabaseResponse object as it is. If you're\r\n    // creating a new response object with NextResponse.next() make sure to:\r\n    // 1. Pass the request in it, like so:\r\n    //    const myNewResponse = NextResponse.next({ request })\r\n    // 2. Copy over the cookies, like so:\r\n    //    myNewResponse.cookies.setAll(supabaseResponse.cookies.getAll())\r\n    // 3. Change the myNewResponse object to fit your needs, but avoid changing\r\n    //    the cookies!\r\n    // 4. Finally:\r\n    //    return myNewResponse\r\n    // If this is not done, you may be causing the browser and server to go out\r\n    // of sync and terminate the user's session prematurely!\r\n\r\n    return supabaseResponse\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\juven\\OneDrive\\Documents\\Atria\\ANTIGRAVITY FLASHCARDS\\level-up\\src\\utils\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
